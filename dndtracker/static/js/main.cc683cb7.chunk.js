(this.webpackJsonpdndtracker=this.webpackJsonpdndtracker||[]).push([[0],{196:function(e,t,i){},299:function(e,t,i){},300:function(e,t,i){},301:function(e,t,i){"use strict";i.r(t);var n,a,r=i(1),c=i.n(r),s=i(68),l=i.n(s),d=(i(196),function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,349)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;i(e),n(e),a(e),r(e),c(e)}))}),o=i(340),j=i(5),b=i(329),u=i(322),O=i(77),h=i(347),m=i(45),x=i(343),p=i(326),f=i(333),v=i(323),g=i(334),y=i(335),P=i(319),C=i(336),w=i(327),H=i(27),I=i(348),M=i(181),S=i(17),k=i(9),T=i(12),A=i(47),q=i(63),N=i(317),R=i(318),E=i(2),F=function(e){var t=e.children,i=e.name,n=e.label,a=e.helperText,r=e.hideError,c=Object(A.a)(e,["children","name","label","helperText","hideError"]),s=Object(S.d)(i),l=Object(j.a)(s,2)[1],d=l.error,o=l.touched;return Object(E.jsxs)(q.a,Object(T.a)(Object(T.a)({isInvalid:!!d&&o},c),{},{children:[n&&Object(E.jsx)(N.a,{htmlFor:i,children:n}),t,!r&&d&&Object(E.jsx)(R.a,{children:d}),a&&Object(E.jsx)(q.b,{children:a})]}))},z=function(e){var t=e.name,i=e.label,n=e.inputProps,a=Object(A.a)(e,["name","label","inputProps"]),r=Object(S.d)(t),c=Object(j.a)(r,1)[0];return Object(E.jsx)(F,Object(T.a)(Object(T.a)({name:t,label:i},a),{},{children:Object(E.jsx)(P.a,Object(T.a)(Object(T.a)({},c),{},{id:t},n))}))},W=i(339),V=function(e){var t=e.name,i=e.label,n=e.showStepper,a=void 0===n||n,r=e.children,c=e.numberInputProps,s=Object(A.a)(e,["name","label","showStepper","children","numberInputProps"]),l=Object(S.d)(t),d=Object(j.a)(l,2),o=d[0],b=d[1],u=b.error,O=b.touched,h=Object(S.e)().setFieldValue;return Object(E.jsx)(F,Object(T.a)(Object(T.a)({name:t,label:i},s),{},{children:Object(E.jsxs)(W.c,Object(T.a)(Object(T.a)(Object(T.a)({},o),{},{id:t,onChange:function(e){return function(t){return h(e,Number(t))}}(t),isInvalid:!!u&&O},c),{},{children:[Object(E.jsx)(W.d,{name:t}),a&&Object(E.jsxs)(W.e,{children:[Object(E.jsx)(W.b,{}),Object(E.jsx)(W.a,{})]}),r]}))}))},D=i(173),_=i(345),B=i(51),J=function(e){var t=e.name,i=e.label,a=e.switchProps,r=Object(A.a)(e,["name","label","switchProps"]),c=Object(S.d)(t),s=Object(j.a)(c,2),l=s[0],d=s[1],o=d.error,b=d.touched;return Object(E.jsx)(u.a,{css:Object(B.b)(n||(n=Object(D.a)(["\n        .chakra-form__label {\n          margin-bottom: 0;\n        }\n        .chakra-switch {\n          display: flex;\n          align-items: center;\n          margin-right: 0.75rem;\n        }\n        .chakra-form__error-message {\n          margin-top: 0;\n        }\n      "]))),children:Object(E.jsx)(F,Object(T.a)(Object(T.a)({name:t,label:i,as:v.a,alignItems:"center"},r),{},{children:Object(E.jsx)(_.a,Object(T.a)(Object(T.a)({},l),{},{id:t,isInvalid:!!o&&b,isChecked:l.value},a))}))})},L=i(87),G=function(){return Object(L.b)()},K=L.c,Q=i(11),U=i(62),X=i(342);!function(e){e[e.d100=100]="d100",e[e.d20=20]="d20",e[e.d12=12]="d12",e[e.d10=10]="d10",e[e.d8=8]="d8",e[e.d6=6]="d6",e[e.d4=4]="d4",e[e.d2=2]="d2"}(a||(a={}));var Y=function(e){return Math.ceil(Math.random()*e)},Z=Object(U.b)({name:"npc",initialState:{npcs:[]},reducers:{addNPC:function(e,t){var i=Object(X.a)();e.npcs.push(Object(T.a)(Object(T.a)({},t.payload),{},{id:i}))},removeNPC:function(e,t){var i=e.npcs.findIndex((function(e){return e.id===t.payload}));i>=0?e.npcs.splice(i,1):console.warn("Invalid NPC ".concat(t.payload))},refreshNPCs:function(e,t){var i;t.payload&&(i=e.npcs).splice.apply(i,[0,e.npcs.length].concat(Object(Q.a)(t.payload)))},modifyNPC:function(e,t){var i=e.npcs.findIndex((function(e){return e.id===t.payload.id}));i>=0&&(e.npcs[i]=Object(T.a)(Object(T.a)({},e.npcs[i]),t.payload))},rollAllNPCInitiative:function(e){e.npcs.forEach((function(e){e.initiative=Y(a.d20)}))}}}),$=k.d({name:k.e(),currentHP:k.c().integer().required(),maxHP:k.c().integer().required(),tempHP:k.c().integer().default(0).required(),armourClass:k.c().integer().required(),initiative:k.c().integer().min(1).max(20).required(),initiativeMod:k.c().integer().required(),notes:k.e(),conditions:k.a().of(k.e()).required(),displayOnTurnOrder:k.b().required(),isHostile:k.b().required(),isFriendly:k.b().required(),isBoss:k.b().required(),showHealth:k.b().required(),showInitiative:k.b().required(),showAC:k.b().required(),showName:k.b().required()}),ee=Z.actions,te=ee.addNPC,ie=ee.removeNPC,ne=ee.refreshNPCs,ae=(ee.rollAllNPCInitiative,ee.modifyNPC),re=Z.reducer,ce=i(341),se=i(174),le=i(338),de=i(330),oe=i(331),je=i(107),be=i(76),ue=i(75),Oe=i(325),he=function(e){var t=e.name,i=e.label,n=e.textareaProps,a=Object(A.a)(e,["name","label","textareaProps"]),r=Object(S.d)(t),c=Object(j.a)(r,1)[0];return Object(E.jsx)(F,Object(T.a)(Object(T.a)({name:t,label:i},a),{},{children:Object(E.jsx)(Oe.a,Object(T.a)(Object(T.a)({},c),{},{id:t},n))}))},me=i(328),xe=function(e){var t=e.character,i=Object(S.e)();return Object(E.jsx)(S.a,{name:"conditions",render:function(e){return Object(E.jsxs)(u.a,{p:2,border:"1px solid #00000066",borderRadius:8,mb:2,children:[Object(E.jsx)(v.a,{justifyContent:"center",children:Object(E.jsx)(p.a,{fontWeight:"bold",children:"Conditions"})}),Object(E.jsx)(w.a,{mt:1,mb:1,opacity:"0.3"}),i.values.conditions.map((function(t,i){return Object(E.jsxs)(me.a,{variant:"solid",borderRadius:"full",size:"lg",m:2,children:[Object(E.jsx)(me.c,{children:t}),Object(E.jsx)(me.b,{onClick:function(){return e.remove(i)}})]},i)})),Object(E.jsxs)(me.a,{variant:"outline",borderRadius:"full",size:"lg",m:2,children:[Object(E.jsx)(P.a,{size:"xs",id:"tag-input-".concat(t.id)}),Object(E.jsx)(me.d,{as:I.a,cursor:"pointer",onClick:function(){var i=document.querySelector("#tag-input-".concat(t.id));if(null===i||void 0===i?void 0:i.value){var n=i.value.toString();i.value="",e.push(n)}}})]})]})}})},pe=function(e){var t=e.npc,i=G(),n=function(){var e=Object(S.e)().setFieldValue;return Object(E.jsxs)(ce.d,{children:[Object(E.jsxs)(ce.b,{children:[Object(E.jsx)(u.a,{flex:"1",textAlign:"left",children:Object(E.jsx)("strong",{children:"Edit Stats"})}),Object(E.jsx)(ce.c,{})]}),Object(E.jsx)(ce.e,{children:Object(E.jsxs)(se.a,{fontSize:"sm",templateColumns:"repeat(4, 1fr)",templateRows:"repeat(2, 1fr)",gap:4,children:[Object(E.jsx)(se.b,{colSpan:4,children:Object(E.jsx)(M.a,{width:"100%",onClick:function(){return e("initiative",Y(a.d20))},variant:"outline",rightIcon:Object(E.jsx)(O.a,{as:H.b}),children:"Roll Initiative"})}),[["AC: ","armourClass"],["Initiative: ","initiative"],["Init. Mod: ","initiativeMod"],["Max HP: ","maxHP"]].map((function(e){var t=Object(j.a)(e,2),i=t[0],n=t[1];return Object(E.jsx)(se.b,{children:Object(E.jsxs)(x.a,{children:[Object(E.jsx)(p.a,{children:i}),Object(E.jsx)(V,{hideError:!0,name:n,width:"8em"})]})},n)}))]})})]})},r=function(e){var t=e.npc,n=Object(S.e)();return Object(E.jsxs)(x.a,{mt:4,children:[Object(E.jsx)(le.a,{label:"Save",placement:"top",children:Object(E.jsx)(M.a,{width:"100%",type:"submit",hidden:!n.dirty,variant:"solid",colorScheme:"green",children:Object(E.jsx)(O.a,{as:ue.a})})}),Object(E.jsx)(le.a,{label:"Reset",placement:"top",children:Object(E.jsx)(M.a,{width:"100%",type:"reset",hidden:!n.dirty,variant:"solid",children:Object(E.jsx)(O.a,{as:be.a})})}),Object(E.jsx)(le.a,{label:"Delete",placement:"top",children:Object(E.jsx)(M.a,{width:"100%",onClick:function(){return e=t.id,i(ie(e));var e},variant:"solid",colorScheme:"red",children:Object(E.jsx)(O.a,{as:je.a})})})]})};return Object(E.jsx)(S.c,{initialValues:t,onSubmit:function(e,t){!function(e){i(ae(e))}(e),t.resetForm()},enableReinitialize:!0,validationSchema:$,children:Object(E.jsx)(u.a,{className:"",width:"100%",id:"npc-".concat(t.id),border:"0.2em solid #55000066",borderRadius:10,p:4,children:Object(E.jsxs)(S.b,{children:[Object(E.jsxs)(x.a,{p:1,mb:2,children:[Object(E.jsx)(u.a,{textAlign:"center",width:"100%",backgroundColor:"darkred",color:"white",borderRadius:8,p:2,children:Object(E.jsx)(p.a,{fontWeight:"bold",children:t.name})}),Object(E.jsx)(r,{npc:t})]}),Object(E.jsxs)(de.a,{templateColumns:"repeat(3, 1fr)",mt:4,mb:4,children:[Object(E.jsx)(se.b,{children:Object(E.jsxs)(x.c,{alignItems:"flex-start",children:[Object(E.jsx)(u.a,{children:Object(E.jsxs)(x.a,{children:[Object(E.jsx)(p.a,{fontWeight:"bold",children:"THP "}),Object(E.jsx)(V,{hideError:!0,name:"tempHP",width:"6em"})]})}),Object(E.jsx)(u.a,{children:Object(E.jsxs)(x.a,{children:[Object(E.jsx)(p.a,{fontWeight:"bold",children:"HP "}),Object(E.jsx)(V,{hideError:!0,name:"currentHP",width:"6em"}),Object(E.jsxs)(p.a,{children:["/ ",t.maxHP]})]})}),Object(E.jsxs)(p.a,{children:["AC ",t.armourClass,", Init. ",t.initiative+t.initiativeMod," (",t.initiative,Object(E.jsx)(O.a,{as:H.b})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]})}),Object(E.jsx)(se.b,{colSpan:2,children:Object(E.jsx)(he,{name:"notes",textareaProps:{resize:"none",height:"10em"}})})]}),Object(E.jsx)(xe,{character:t}),Object(E.jsxs)(ce.a,{allowToggle:!0,allowMultiple:!0,children:[Object(E.jsx)(n,{}),Object(E.jsxs)(ce.d,{children:[Object(E.jsxs)(ce.b,{children:[Object(E.jsx)(u.a,{flex:"1",textAlign:"left",children:Object(E.jsx)("strong",{children:"Options"})}),Object(E.jsx)(ce.c,{})]}),Object(E.jsx)(ce.e,{children:Object(E.jsx)(se.a,{fontSize:"sm",templateColumns:"repeat(3, 1fr)",templateRows:"repeat(2, 1fr)",gap:6,children:[["Reveal Name","showName"],["Reveal Health","showHealth"],["Reveal Armour Class","showAC"],["Reveal Initiative","showInitiative"],["Show in Turn Order","displayOnTurnOrder"]].map((function(e){var t=Object(j.a)(e,2),i=t[0],n=t[1];return Object(E.jsxs)(q.a,{display:"flex",alignItems:"center",children:[Object(E.jsx)(N.a,{mb:"0",children:i}),Object(E.jsx)(oe.a,{}),Object(E.jsx)(J,{name:n})]},n)}))})})]})]})]})})})};function fe(){var e=K((function(e){return e.npcs.npcs.filter((function(e){return e.isHostile}))})),t=G(),i=k.d({name:k.e().required().label("Name"),maxHP:k.c().integer().moreThan(0).required().label("Maximum HP"),initiativeMod:k.c().integer().required().label("Initiative Modifier"),armourClass:k.c().integer().moreThan(0).default(10).label("Armour Class")}),n=function(){var e=[["Enemy Name","name",z],["Maximum HP","maxHP",V],["Initiative Modifier","initiativeMod",V],["Armour Class","armourClass",V]];return Object(E.jsx)(S.c,{initialValues:{name:"",maxHP:0,initiativeMod:0,armourClass:0},validationSchema:i,onSubmit:function(e,i){t(te({name:e.name,maxHP:e.maxHP,currentHP:e.maxHP,tempHP:0,initiative:Y(a.d20),initiativeMod:e.initiativeMod,armourClass:e.armourClass,conditions:[],displayOnTurnOrder:!0,notes:"",isFriendly:!1,isHostile:!0,isBoss:!1,showHealth:!1,showInitiative:!1,showAC:!1,showName:!1})),i.resetForm()},children:Object(E.jsxs)(S.b,{children:[Object(E.jsx)(x.a,{children:e.map((function(e){var t=Object(j.a)(e,3),i=t[0],n=t[1],a=t[2];return Object(E.jsx)(a,{hideError:!0,mt:4,mb:4,name:n,label:i},n)}))}),Object(E.jsx)(M.a,{mb:4,width:"100%",type:"submit",variant:"solid",colorScheme:"green",rightIcon:Object(E.jsx)(O.a,{as:I.a}),children:"Add Enemy"})]})})};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(n,{}),Object(E.jsx)(x.c,{children:e.map((function(e){return Object(E.jsx)(pe,{npc:e},e.id)}))})]})}var ve=Object(U.b)({name:"player",initialState:{players:[]},reducers:{addPlayer:function(e,t){var i=Object(X.a)();e.players.push(Object(T.a)(Object(T.a)({},t.payload),{},{id:i}))},removePlayer:function(e,t){var i=e.players.findIndex((function(e){return e.id===t.payload}));i>=0?e.players.splice(i,1):console.warn("Invalid player ".concat(t.payload))},refreshPlayers:function(e,t){var i;t.payload&&(i=e.players).splice.apply(i,[0,e.players.length].concat(Object(Q.a)(t.payload)))},modifyPlayer:function(e,t){var i=e.players.findIndex((function(e){return e.id===t.payload.id}));i>=0&&(e.players[i]=Object(T.a)(Object(T.a)({},e.players[i]),t.payload))},rollAllPlayerInitiative:function(e){e.players.forEach((function(e){e.initiative=Y(a.d20)}))}}}),ge=k.d({name:k.e(),currentHP:k.c().integer().required(),maxHP:k.c().integer().required(),tempHP:k.c().integer().default(0).required(),armourClass:k.c().integer().required(),initiative:k.c().integer().min(1).max(20).required(),initiativeMod:k.c().integer().required(),notes:k.e(),conditions:k.a().of(k.e()).required(),displayOnTurnOrder:k.b().required()}),ye=ve.actions,Pe=ye.addPlayer,Ce=ye.removePlayer,we=ye.refreshPlayers,He=ye.rollAllPlayerInitiative,Ie=ye.modifyPlayer,Me=ve.reducer,Se=function(e){var t=e.player,i=G(),n=function(){var e=Object(S.e)().setFieldValue;return Object(E.jsxs)(ce.d,{children:[Object(E.jsxs)(ce.b,{children:[Object(E.jsx)(u.a,{flex:"1",textAlign:"left",children:Object(E.jsx)("strong",{children:"Edit Stats"})}),Object(E.jsx)(ce.c,{})]}),Object(E.jsx)(ce.e,{children:Object(E.jsxs)(se.a,{fontSize:"sm",templateColumns:"repeat(4, 1fr)",templateRows:"repeat(2, 1fr)",gap:4,children:[Object(E.jsx)(se.b,{colSpan:4,children:Object(E.jsx)(M.a,{width:"100%",onClick:function(){return e("initiative",Y(a.d20))},variant:"outline",rightIcon:Object(E.jsx)(O.a,{as:H.b}),children:"Roll Initiative"})}),[["AC: ","armourClass"],["Initiative: ","initiative"],["Init. Mod: ","initiativeMod"],["Max HP: ","maxHP"]].map((function(e){var t=Object(j.a)(e,2),i=t[0],n=t[1];return Object(E.jsx)(se.b,{children:Object(E.jsxs)(x.a,{children:[Object(E.jsx)(p.a,{children:i}),Object(E.jsx)(V,{hideError:!0,name:n,width:"8em"})]})},n)}))]})})]})},r=function(e){var t=e.player,n=Object(S.e)();return Object(E.jsxs)(x.a,{mt:4,children:[Object(E.jsx)(le.a,{label:"Save",placement:"top",children:Object(E.jsx)(M.a,{width:"100%",type:"submit",hidden:!n.dirty,variant:"solid",colorScheme:"green",children:Object(E.jsx)(O.a,{as:ue.a})})}),Object(E.jsx)(le.a,{label:"Reset",placement:"top",children:Object(E.jsx)(M.a,{width:"100%",type:"reset",hidden:!n.dirty,variant:"solid",children:Object(E.jsx)(O.a,{as:be.a})})}),Object(E.jsx)(le.a,{label:"Delete",placement:"top",children:Object(E.jsx)(M.a,{width:"100%",onClick:function(){return e=t.id,i(Ce(e));var e},variant:"solid",colorScheme:"red",children:Object(E.jsx)(O.a,{as:je.a})})})]})};return Object(E.jsx)(S.c,{initialValues:t,onSubmit:function(e,t){!function(e){i(Ie(e))}(e),t.resetForm()},enableReinitialize:!0,validationSchema:ge,children:Object(E.jsx)(u.a,{className:"",width:"100%",id:"player-".concat(t.id),border:"0.2em solid #00550066",borderRadius:10,p:4,children:Object(E.jsxs)(S.b,{children:[Object(E.jsxs)(x.a,{p:1,mb:2,children:[Object(E.jsx)(u.a,{textAlign:"center",width:"100%",backgroundColor:"darkgreen",color:"white",borderRadius:8,p:2,children:Object(E.jsx)(p.a,{fontWeight:"bold",children:t.name})}),Object(E.jsx)(r,{player:t})]}),Object(E.jsxs)(de.a,{templateColumns:"repeat(3, 1fr)",mt:4,mb:4,children:[Object(E.jsx)(se.b,{children:Object(E.jsxs)(x.c,{alignItems:"flex-start",children:[Object(E.jsx)(u.a,{children:Object(E.jsxs)(x.a,{children:[Object(E.jsx)(p.a,{fontWeight:"bold",children:"THP "}),Object(E.jsx)(V,{hideError:!0,name:"tempHP",width:"6em"})]})}),Object(E.jsx)(u.a,{children:Object(E.jsxs)(x.a,{children:[Object(E.jsx)(p.a,{fontWeight:"bold",children:"HP "}),Object(E.jsx)(V,{hideError:!0,name:"currentHP",width:"6em"}),Object(E.jsxs)(p.a,{children:["/ ",t.maxHP]})]})}),Object(E.jsxs)(p.a,{children:["AC ",t.armourClass,", Init. ",t.initiative+t.initiativeMod," (",t.initiative,Object(E.jsx)(O.a,{as:H.b})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]})}),Object(E.jsx)(se.b,{colSpan:2,children:Object(E.jsx)(he,{name:"notes",textareaProps:{resize:"none",height:"10em"}})})]}),Object(E.jsx)(xe,{character:t}),Object(E.jsxs)(ce.a,{allowToggle:!0,allowMultiple:!0,children:[Object(E.jsx)(n,{}),Object(E.jsxs)(ce.d,{children:[Object(E.jsxs)(ce.b,{children:[Object(E.jsx)(u.a,{flex:"1",textAlign:"left",children:Object(E.jsx)("strong",{children:"Options"})}),Object(E.jsx)(ce.c,{})]}),Object(E.jsx)(ce.e,{children:Object(E.jsx)(se.a,{fontSize:"sm",templateColumns:"repeat(3, 1fr)",templateRows:"repeat(1, 1fr)",gap:6,children:[["Show in Turn Order","displayOnTurnOrder"]].map((function(e){var t=Object(j.a)(e,2),i=t[0],n=t[1];return Object(E.jsxs)(q.a,{display:"flex",alignItems:"center",children:[Object(E.jsx)(N.a,{mb:"0",children:i}),Object(E.jsx)(oe.a,{}),Object(E.jsx)(J,{name:n})]},n)}))})})]})]})]})})})};function ke(){var e=K((function(e){return e.players.players})),t=G(),i=k.d({name:k.e().required().label("Name"),maxHP:k.c().integer().moreThan(0).required().label("Maximum HP"),initiativeMod:k.c().integer().required().label("Initiative Modifier"),armourClass:k.c().integer().moreThan(0).default(10).label("Armour Class")}),n=function(){var e=[["Player Name","name",z],["Maximum HP","maxHP",V],["Initiative Modifier","initiativeMod",V],["Armour Class","armourClass",V]];return Object(E.jsx)(S.c,{initialValues:{name:"",maxHP:0,initiativeMod:0,armourClass:0},validationSchema:i,onSubmit:function(e,i){t(Pe({name:e.name,maxHP:e.maxHP,currentHP:e.maxHP,tempHP:0,initiative:Y(a.d20),initiativeMod:e.initiativeMod,armourClass:e.armourClass,conditions:[],displayOnTurnOrder:!0,notes:""})),i.resetForm()},children:Object(E.jsxs)(S.b,{children:[Object(E.jsx)(x.a,{children:e.map((function(e){var t=Object(j.a)(e,3),i=t[0],n=t[1],a=t[2];return Object(E.jsx)(a,{hideError:!0,mt:4,mb:4,name:n,label:i},n)}))}),Object(E.jsx)(M.a,{mb:4,width:"100%",type:"submit",variant:"solid",colorScheme:"green",rightIcon:Object(E.jsx)(O.a,{as:I.a}),children:"Add Player"})]})})};return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(n,{}),Object(E.jsx)(x.c,{children:e.map((function(e){return Object(E.jsx)(Se,{player:e},e.id)}))})]})}var Te=Object(U.b)({name:"campaign",initialState:{currentTurnId:"",campaignTitle:"D&D Tracker"},reducers:{setTurn:function(e,t){e.currentTurnId=t.payload},setCampaignTitle:function(e,t){e.campaignTitle=t.payload}}}),Ae=Te.actions,qe=Ae.setTurn,Ne=Ae.setCampaignTitle,Re=Te.reducer,Ee="0.0.2",Fe=function(){try{var e=localStorage.getItem("persistantState_".concat(Ee));if(null===e)return;return JSON.parse(e)}catch(t){return void console.warn(t)}},ze=Object(U.a)({reducer:{players:Me,campaign:Re,npcs:re},preloadedState:Fe()});ze.subscribe((function(){document.hasFocus()&&function(e){try{var t=JSON.stringify(e);localStorage.setItem("persistantState_".concat(Ee),t)}catch(i){console.warn(i)}}(ze.getState())}));var We=i(332),Ve=i(86);function De(e){var t=e.enemy,i=e.isActive,n=e.onClick,a=t.tempHP?" (".concat(t.tempHP,")"):"";return Object(E.jsxs)(u.a,{className:"turn-block turn-block-enemy",border:"0.2em solid #AA000066",borderRadius:"0.4em",opacity:i?"100%":"40%",cursor:"pointer",onClick:n,children:[Object(E.jsxs)(se.a,{templateColumns:"repeat(3, 1fr)",fontSize:"sm",children:[Object(E.jsx)(p.a,{children:t.showName?t.name:"???"}),t.showAC&&Object(E.jsxs)(p.a,{children:[Object(E.jsx)(O.a,{as:H.a})," ",t.armourClass]}),t.showHealth?Object(E.jsxs)(p.a,{children:[Object(E.jsx)(O.a,{as:Ve.a})," ",t.currentHP,a," / ",t.maxHP]}):Object(E.jsxs)(p.a,{children:[Object(E.jsx)(O.a,{as:Ve.a})," Damage Taken: ",t.maxHP-t.currentHP]}),t.showInitiative&&Object(E.jsxs)(p.a,{children:[Object(E.jsx)(O.a,{as:H.d})," ",t.initiative+t.initiativeMod," (",t.initiative,Object(E.jsx)(O.a,{as:H.b})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]}),t.conditions.length>0&&Object(E.jsx)(x.a,{children:t.conditions.map((function(e){return Object(E.jsx)(We.a,{variant:"solid",children:e},t.conditions.findIndex((function(t){return e===t})))}))})]})}i(299);function _e(e){var t=e.player,i=e.isActive,n=e.onClick,a=t.tempHP?" (".concat(t.tempHP,")"):"";return Object(E.jsxs)(u.a,{onClick:n,className:"turn-block turn-block-player",border:"0.2em solid #00AA0066",borderRadius:"0.4em",opacity:i?"100%":"40%",cursor:"pointer",children:[Object(E.jsxs)(se.a,{templateColumns:"repeat(4, 1fr)",fontSize:"sm",children:[Object(E.jsx)(p.a,{children:t.name}),Object(E.jsxs)(p.a,{children:[Object(E.jsx)(O.a,{as:H.a})," ",t.armourClass]}),Object(E.jsxs)(p.a,{children:[Object(E.jsx)(O.a,{as:Ve.a})," ",t.currentHP,a," / ",t.maxHP]}),Object(E.jsxs)(p.a,{children:[Object(E.jsx)(O.a,{as:H.d})," ",t.initiative+t.initiativeMod," (",t.initiative,Object(E.jsx)(O.a,{as:H.b})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]}),t.conditions.length>0&&Object(E.jsx)(x.a,{children:t.conditions.map((function(e){return Object(E.jsx)(We.a,{variant:"solid",children:e},t.conditions.findIndex((function(t){return e===t})))}))})]})}function Be(e){var t=e.changePageMethod,i=K((function(e){return e.players.players})),n=K((function(e){return e.npcs.npcs})),a=K((function(e){return e.campaign.currentTurnId})),r=G(),c=function(){var e=i.map((function(e){return{character:e,type:"player"}})),t=n.map((function(e){var t="neutral";return e.isHostile?t="enemy":e.isFriendly&&(t="ally"),{character:e,type:t}})),r=[].concat(Object(Q.a)(e),Object(Q.a)(t)).filter((function(e){return e.character.displayOnTurnOrder})).sort((function(e,t){return t.character.initiative+t.character.initiativeMod-(e.character.initiative+e.character.initiativeMod)})),c=function(e){return e.filter((function(e){return e.character.displayOnTurnOrder})).map((function(e,t){return{isActive:0===t,character:e.character,type:e.type}}))};if(!a)return c(r);var s=r.findIndex((function(e){return e.character.id===a}))||0;return c([].concat(Object(Q.a)(r.slice(s+1,r.length)),Object(Q.a)(r.slice(0,s+1))))};return Object(E.jsxs)("div",{children:[Object(E.jsxs)(x.c,{divider:Object(E.jsx)(x.b,{color:"gray.200"}),children:[c().map((function(e){var i=e.character,n=e.isActive,a=e.type;if("player"===a)return Object(E.jsx)(_e,{onClick:function(){return t({type:"player",id:i.id})},isActive:n,player:i},i.id);if("enemy"===a){var r=i;return Object(E.jsx)(De,{onClick:function(){return t({type:"npc",id:i.id})},isActive:n,enemy:r},i.id)}return!1})),";"]}),Object(E.jsxs)(x.a,{position:"fixed",bottom:"0",left:"0",backgroundColor:"white",width:"100%",children:[Object(E.jsxs)(M.a,{onClick:function(){r(He()),r(qe(""))},width:"100%",children:["Roll Initiative ",Object(E.jsx)(O.a,{as:H.b})]}),Object(E.jsx)(M.a,{onClick:function(){var e=c();if(!(c().length<1))if(a){var t=e.findIndex((function(e){return e.character.id===a}));if(t){var i=e[(t+1)%e.length];r(qe(i.character.id))}else r(qe(e[1].character.id))}else r(qe(e[0].character.id))},width:"100%",children:"Next Turn"})]})]})}i(300);var Je=i(176);function Le(){var e=K((function(e){return e.campaign.campaignTitle})),t=G(),i=Object(r.useState)(e),n=Object(j.a)(i,2),a=n[0],c=n[1];window.addEventListener("storage",(function(){var e,i,n,a,r=Fe();document.hasFocus()||[we((null===r||void 0===r||null===(e=r.players)||void 0===e?void 0:e.players)||[]),ne((null===r||void 0===r||null===(i=r.npcs)||void 0===i?void 0:i.npcs)||[]),Ne((null===r||void 0===r||null===(n=r.campaign)||void 0===n?void 0:n.campaignTitle)||""),qe((null===r||void 0===r||null===(a=r.campaign)||void 0===a?void 0:a.currentTurnId)||"")].map(t)}));var s=Object(r.useState)(0),l=Object(j.a)(s,2),d=l[0],o=l[1],I=Object(r.useState)(!1),M=Object(j.a)(I,2),S=M[0],k=M[1],T={initiative:0,player:1,enemy:2,npc:3},A=["Turn Order","Players","Enemies"],q=Object(b.a)(),N=q.isOpen,R=q.onOpen,F=q.onClose,z=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"drawer-button",children:Object(E.jsx)(u.a,{pt:3,pb:3,pl:4,pr:4,cursor:"pointer",onClick:R,children:Object(E.jsx)(O.a,{as:H.c})})}),Object(E.jsxs)(h.a,{isOpen:N,placement:"left",onClose:F,children:[Object(E.jsx)(m.g,{}),Object(E.jsxs)(h.b,{children:[Object(E.jsx)(m.c,{}),Object(E.jsx)(m.f,{children:"Menu"}),Object(E.jsx)(m.b,{children:Object(E.jsx)(x.c,{spacing:5,children:A.map((function(e,t){return Object(E.jsx)(p.a,{cursor:"pointer",width:"100%",textAlign:"left",onClick:function(){return o(t)},backgroundColor:d===t?"black":void 0,p:4,fontWeight:"bold",color:d===t?"white":void 0,children:e},t)}))})}),Object(E.jsx)(m.e,{})]})]})]});return Object(E.jsxs)("div",{className:"Tracker",children:[Object(E.jsxs)(f.a,{maxW:"900",minW:"680",children:[Object(E.jsxs)(v.a,{mb:4,width:"100%",justifyContent:"center",alignItems:"center",children:[!S&&Object(E.jsxs)(v.a,{justifyContent:"center",alignItems:"center",children:[Object(E.jsx)(g.a,{children:e}),Object(E.jsx)(y.a,{ml:2,"aria-label":"Edit Title",icon:Object(E.jsx)(O.a,{as:Je.a}),onClick:function(){k(!0)}})]}),S&&Object(E.jsxs)(v.a,{justifyContent:"center",alignItems:"center",children:[Object(E.jsx)(P.a,{onBlur:function(e){return c(e.target.value)}}),Object(E.jsx)(y.a,{ml:2,"aria-label":"Save",icon:Object(E.jsx)(O.a,{as:ue.a}),onClick:function(){k(!1),function(e){t(Ne(e))}(a)}}),Object(E.jsx)(y.a,{ml:2,"aria-label":"Reset",icon:Object(E.jsx)(O.a,{as:be.a}),onClick:function(){return k(!1)}})]})]}),Object(E.jsx)(C.a,{children:Object(E.jsx)(g.a,{size:"md",children:A[d]})}),Object(E.jsx)(w.a,{mt:4,mb:4}),Object(E.jsx)(u.a,{hidden:d!==T.initiative,children:Object(E.jsx)(Be,{changePageMethod:function(e){var t=e.type,i=e.id;T[t]&&(o(T[t]),setTimeout((function(){var e;null===(e=document.querySelector("#".concat(t,"-").concat(i)))||void 0===e||e.scrollIntoView(!0)}),100))}})}),Object(E.jsx)(u.a,{hidden:d!==T.player,children:Object(E.jsx)(ke,{})}),Object(E.jsx)(u.a,{hidden:d!==T.enemy,children:Object(E.jsx)(fe,{})})]}),z]})}l.a.render(Object(E.jsx)(L.a,{store:ze,children:Object(E.jsx)(o.a,{children:Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(Le,{})})})}),document.getElementById("root")),d()}},[[301,1,2]]]);
//# sourceMappingURL=main.cc683cb7.chunk.js.map