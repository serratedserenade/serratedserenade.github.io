(this.webpackJsonpdndtracker=this.webpackJsonpdndtracker||[]).push([[0],{218:function(e,t,n){},322:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){"use strict";n.r(t);var i,a,c=n(1),r=n.n(c),s=n(79),l=n.n(s),o=(n(218),n(371)),d=n(97),j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,377)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),c(e),r(e)}))},u=n(367),b=n(362),h=n(364),O=n(353),x=n(127),p=n(63),m=n(27),f=n(66),v=n(25),g=n(58),y=n(5),w=n(355),C=n(374),P=n(205),S=n(89),k=n(16),H=n(9),I=n(13),M=n(59),A=n(76),T=n(344),N=n(345),F=n(2),R=function(e){var t=e.children,n=e.name,i=e.label,a=e.helperText,c=e.hideError,r=Object(M.a)(e,["children","name","label","helperText","hideError"]),s=Object(k.d)(n),l=Object(y.a)(s,2)[1],o=l.error,d=l.touched;return Object(F.jsxs)(A.a,Object(I.a)(Object(I.a)({isInvalid:!!o&&d},r),{},{children:[i&&Object(F.jsx)(T.a,{htmlFor:n,children:i}),t,!c&&o&&Object(F.jsx)(N.a,{children:o}),a&&Object(F.jsx)(A.b,{children:a})]}))},E=n(346),z=function(e){var t=e.name,n=e.label,i=e.inputProps,a=Object(M.a)(e,["name","label","inputProps"]),c=Object(k.d)(t),r=Object(y.a)(c,1)[0];return Object(F.jsx)(R,Object(I.a)(Object(I.a)({name:t,label:n},a),{},{children:Object(F.jsx)(E.a,Object(I.a)(Object(I.a)({},r),{},{id:t},i))}))},q=n(370),D=function(e){var t,n=e.name,i=e.label,a=e.showStepper,c=void 0===a||a,r=e.children,s=e.numberInputProps,l=e.fieldId,o=Object(M.a)(e,["name","label","showStepper","children","numberInputProps","fieldId"]),d=Object(k.d)(n),j=Object(y.a)(d,2),u=j[0],b=j[1],h=b.error,O=b.touched,x=Object(k.e)().setFieldValue;return Object(F.jsx)(R,Object(I.a)(Object(I.a)({name:n,label:i},o),{},{children:Object(F.jsxs)(q.c,Object(I.a)(Object(I.a)(Object(I.a)({},u),{},{id:n,onChange:(t=n,function(e){return x(t,Number(e))}),isInvalid:!!h&&O},s),{},{children:[Object(F.jsx)(q.d,{name:n,id:l}),c&&Object(F.jsxs)(q.e,{children:[Object(F.jsx)(q.b,{}),Object(F.jsx)(q.a,{})]}),r]}))}))},W=n(195),L=n(348),_=n(349),V=n(350),J=n(48),B=function(e){var t=e.name,n=e.label,a=e.switchProps,c=Object(M.a)(e,["name","label","switchProps"]),r=Object(k.d)(t),s=Object(y.a)(r,2),l=s[0],o=s[1],d=o.error,j=o.touched;return Object(F.jsx)(L.a,{css:Object(J.b)(i||(i=Object(W.a)(["\n        .chakra-form__label {\n          margin-bottom: 0;\n        }\n        .chakra-switch {\n          display: flex;\n          align-items: center;\n          margin-right: 0.75rem;\n        }\n        .chakra-form__error-message {\n          margin-top: 0;\n        }\n      "]))),children:Object(F.jsx)(R,Object(I.a)(Object(I.a)({name:t,label:n,as:_.a,alignItems:"center"},c),{},{children:Object(F.jsx)(V.a,Object(I.a)(Object(I.a)({},l),{},{id:t,isInvalid:!!d&&j,isChecked:l.value},a))}))})},G=function(){return Object(d.b)()},U=d.c,K=n(12),Q=n(75),X=n(373);!function(e){e[e.d100=100]="d100",e[e.d20=20]="d20",e[e.d12=12]="d12",e[e.d10=10]="d10",e[e.d8=8]="d8",e[e.d6=6]="d6",e[e.d4=4]="d4",e[e.d2=2]="d2"}(a||(a={}));var Y=function(e){return Math.ceil(Math.random()*e)},Z=Object(Q.b)({name:"npc",initialState:{npcs:[]},reducers:{addNPC:function(e,t){var n=Object(X.a)();e.npcs.push(Object(I.a)(Object(I.a)({},t.payload),{},{id:n}))},removeNPC:function(e,t){var n=e.npcs.findIndex((function(e){return e.id===t.payload}));n>=0?e.npcs.splice(n,1):console.warn("Invalid NPC ".concat(t.payload))},refreshNPCs:function(e,t){var n;t.payload&&(n=e.npcs).splice.apply(n,[0,e.npcs.length].concat(Object(K.a)(t.payload)))},modifyNPC:function(e,t){var n=e.npcs.findIndex((function(e){return e.id===t.payload.id}));n>=0&&(e.npcs[n]=Object(I.a)(Object(I.a)({},e.npcs[n]),t.payload))},rollAllNPCInitiative:function(e){e.npcs.forEach((function(e){e.initiative=Y(a.d20)}))}}}),$=H.d({name:H.e(),currentHP:H.c().integer().required(),maxHP:H.c().integer().required(),tempHP:H.c().integer().default(0).required(),armourClass:H.c().integer().required(),initiative:H.c().integer().min(1).max(20).required(),initiativeMod:H.c().integer().required(),notes:H.e(),externalNotes:H.a().of(H.d({type:H.e(),url:H.e().url(),label:H.e()})),conditions:H.a().of(H.e()).required(),displayOnTurnOrder:H.b().required(),isHostile:H.b().required(),isFriendly:H.b().required(),isBoss:H.b().required(),showHealth:H.b().required(),showInitiative:H.b().required(),showAC:H.b().required(),showName:H.b().required()}),ee=Z.actions,te=ee.addNPC,ne=ee.removeNPC,ie=ee.refreshNPCs,ae=(ee.rollAllNPCInitiative,ee.modifyNPC),ce=Z.reducer,re=n(372),se=n(197),le=n(352),oe=n(369),de=n(360),je=n(356),ue=n(87),be=n(86),he=n(351),Oe=function(e){var t=e.name,n=e.label,i=e.textareaProps,a=Object(M.a)(e,["name","label","textareaProps"]),c=Object(k.d)(t),r=Object(y.a)(c,1)[0];return Object(F.jsx)(R,Object(I.a)(Object(I.a)({name:t,label:n},a),{},{children:Object(F.jsx)(he.a,Object(I.a)(Object(I.a)({},r),{},{id:t},i))}))},xe=n(354),pe=function(e){var t=e.character,n=Object(k.e)();return Object(F.jsx)(k.a,{name:"conditions",render:function(e){var i=function(){var n=document.querySelector("#tag-input-".concat(t.id));if(null===n||void 0===n?void 0:n.value){var i=n.value.toString();n.value="",e.push(i)}};return Object(F.jsxs)(L.a,{p:2,border:"1px solid #00000066",borderRadius:8,mb:2,children:[Object(F.jsx)(_.a,{justifyContent:"center",children:Object(F.jsx)(le.a,{fontWeight:"bold",children:"Conditions"})}),Object(F.jsx)(O.a,{mt:1,mb:1,opacity:"0.3"}),n.values.conditions.map((function(t,n){return Object(F.jsxs)(xe.a,{variant:"solid",borderRadius:"full",size:"lg",m:1,children:[Object(F.jsx)(xe.c,{children:t}),Object(F.jsx)(xe.b,{onClick:function(){return e.remove(n)}})]},t)})),Object(F.jsxs)(xe.a,{variant:"outline",borderRadius:"full",size:"lg",m:1,children:[Object(F.jsx)(E.a,{size:"xs",id:"tag-input-".concat(t.id),onKeyPress:function(e){"Enter"===e.code&&i()}}),Object(F.jsx)(xe.d,{as:w.a,cursor:"pointer",onClick:function(){i()}})]})]})}})},me=function(e){var t=e.character,n=Object(k.e)();return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(L.a,{children:Object(F.jsxs)(C.a,{children:[Object(F.jsx)(le.a,{fontWeight:"bold",children:"THP "}),Object(F.jsx)(D,{hideError:!0,name:"tempHP",width:"6em",onKeyPress:function(e){return"Enter"===e.code&&n.submitForm()}})]})}),Object(F.jsx)(L.a,{children:Object(F.jsxs)(C.a,{children:[Object(F.jsx)(le.a,{fontWeight:"bold",children:"HP "}),Object(F.jsx)(D,{hideError:!0,name:"currentHP",width:"6em",fieldId:"currentHP-".concat(t.id),onKeyPress:function(e){return"Enter"===e.code&&n.submitForm()}}),Object(F.jsxs)(le.a,{children:["/"," ",t.maxHP]})]})})]})},fe=n(358),ve=n(357),ge=function(e){var t=e.character,n=Object(k.e)();return Object(F.jsxs)(re.d,{children:[Object(F.jsxs)(re.b,{children:[Object(F.jsx)(L.a,{flex:"1",textAlign:"left",children:Object(F.jsx)("strong",{children:"External Notes"})}),Object(F.jsx)(re.c,{})]}),Object(F.jsx)(re.e,{children:Object(F.jsx)(k.a,{name:"externalNotes",render:function(e){var i="link-label-".concat(t.id),a="link-url-".concat(t.id);return Object(F.jsxs)(C.c,{children:[n.values.externalNotes.map((function(t,n){return Object(F.jsxs)(_.a,{alignItems:"center",width:"100%",border:"0.2em solid #0000FF22",borderRadius:6,cursor:"pointer",_hover:{border:"0.2em solid #0000FF"},transition:"0.2s",children:[Object(F.jsx)(L.a,{p:1.5,onClick:function(){return window.open(t.url,"_blank")},children:Object(F.jsx)(S.a,{as:g.c,w:6,h:6,color:"blue"})}),Object(F.jsxs)(le.a,{color:"blue",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",onClick:function(){return window.open(t.url,"_blank")},width:"100%",children:[t.label," ","(",t.url,")"]}),Object(F.jsx)(je.a,{}),Object(F.jsx)(ve.a,{ml:1,"aria-label":"Save",icon:Object(F.jsx)(S.a,{as:fe.a}),color:"red",variant:"ghost",onClick:function(){return e.remove(n)}})]},t.label+t.url)})),Object(F.jsxs)(C.a,{width:"100%",children:[Object(F.jsx)(E.a,{placeholder:"Link Label",id:i}),Object(F.jsx)(E.a,{placeholder:"URL",id:a}),Object(F.jsx)(ve.a,{ml:2,"aria-label":"Save",icon:Object(F.jsx)(S.a,{as:w.a}),colorScheme:"blue",variant:"outline",onClick:function(){return function(){var t=document.querySelector("#".concat(i)),n=document.querySelector("#".concat(a));if((null===t||void 0===t?void 0:t.value)&&(null===n||void 0===n?void 0:n.value)){var c=t.value.toString(),r=n.value.toString();t.value="",n.value="";var s={type:"link",label:c,url:r};e.push(s)}}()}})]})]})}})})]})},ye=function(e){["#link-label-".concat(e.id),"#link-url-".concat(e.id),"#tag-input-".concat(e.id)].forEach((function(e){var t=document.querySelector(e);t&&(t.value="")}))},we=function(e){var t=e.npc,n=G(),i=Object(m.g)(),c=Ct.neutral;t.isHostile?c=Ct.enemy:t.isFriendly&&(c=Ct.friendly);var r=function(){var e=Object(k.e)().setFieldValue;return Object(F.jsxs)(re.d,{children:[Object(F.jsxs)(re.b,{children:[Object(F.jsx)(L.a,{flex:"1",textAlign:"left",children:Object(F.jsx)("strong",{children:"Edit Stats"})}),Object(F.jsx)(re.c,{})]}),Object(F.jsx)(re.e,{children:Object(F.jsxs)(se.a,{fontSize:"sm",templateColumns:"repeat(4, 1fr)",templateRows:"repeat(2, 1fr)",gap:4,children:[Object(F.jsx)(se.b,{colSpan:4,children:Object(F.jsx)(P.a,{width:"100%",onClick:function(){return e("initiative",Y(a.d20))},variant:"outline",rightIcon:Object(F.jsx)(S.a,{as:v.c}),children:"Roll Initiative"})}),[["AC: ","armourClass"],["Initiative: ","initiative"],["Init. Mod: ","initiativeMod"],["Max HP: ","maxHP"]].map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(F.jsx)(se.b,{children:Object(F.jsxs)(C.a,{children:[Object(F.jsx)(le.a,{children:n}),Object(F.jsx)(D,{hideError:!0,name:i,width:"8em"})]})},i)}))]})})]})},s=function(e){var t=e.npc,i=Object(k.e)();return Object(F.jsxs)(C.a,{mt:4,children:[Object(F.jsx)(oe.a,{label:"Save",placement:"top",children:Object(F.jsx)(P.a,{width:"100%",hidden:!i.dirty,variant:"solid",colorScheme:"green",onClick:function(){return i.submitForm()},children:Object(F.jsx)(S.a,{as:be.a})})}),Object(F.jsx)(oe.a,{label:"Reset",placement:"top",children:Object(F.jsx)(P.a,{width:"100%",type:"reset",hidden:!i.dirty,variant:"solid",children:Object(F.jsx)(S.a,{as:ue.a})})}),Object(F.jsx)(oe.a,{label:"Delete",placement:"top",children:Object(F.jsx)(P.a,{width:"100%",onClick:function(){return e=t.id,n(ne(e));var e},variant:"solid",colorScheme:"red",children:Object(F.jsx)(S.a,{as:g.a})})})]})};return Object(F.jsx)(k.c,{initialValues:Object(I.a)(Object(I.a)({},t),{},{externalNotes:t.externalNotes||[]}),onSubmit:function(e,i){n(ae(e)),ye(t),i.resetForm()},onReset:function(){ye(t)},enableReinitialize:!0,validationSchema:$,children:Object(F.jsx)(L.a,{className:"",width:"100%",id:"character-".concat(t.id),border:"0.3em solid ".concat(c).concat(i.id===t.id?"FF":22),borderRadius:10,p:4,children:Object(F.jsxs)(k.b,{children:[Object(F.jsxs)(C.a,{p:1,mb:2,children:[Object(F.jsx)(L.a,{textAlign:"center",width:"100%",backgroundColor:c,color:"white",borderRadius:8,p:2,children:Object(F.jsx)(le.a,{fontWeight:"bold",children:t.name})}),Object(F.jsx)(s,{npc:t})]}),Object(F.jsxs)(de.a,{templateColumns:"repeat(3, 1fr)",mt:4,mb:4,children:[Object(F.jsx)(se.b,{children:Object(F.jsxs)(C.c,{alignItems:"flex-start",children:[Object(F.jsx)(me,{character:t}),Object(F.jsxs)(le.a,{children:["AC"," ",t.armourClass,", Init."," ",t.initiative+t.initiativeMod," ","(",t.initiative,Object(F.jsx)(S.a,{as:v.c})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]})}),Object(F.jsx)(se.b,{colSpan:2,children:Object(F.jsx)(Oe,{name:"notes",textareaProps:{resize:"vertical",height:"20em",fontSize:"xs"}})})]}),Object(F.jsx)(pe,{character:t}),Object(F.jsxs)(re.a,{allowToggle:!0,allowMultiple:!0,children:[Object(F.jsx)(ge,{character:t}),Object(F.jsx)(r,{}),Object(F.jsxs)(re.d,{children:[Object(F.jsxs)(re.b,{children:[Object(F.jsx)(L.a,{flex:"1",textAlign:"left",children:Object(F.jsx)("strong",{children:"Options"})}),Object(F.jsx)(re.c,{})]}),Object(F.jsx)(re.e,{children:Object(F.jsx)(se.a,{fontSize:"sm",templateColumns:"repeat(4, 1fr)",templateRows:"repeat(2, 1fr)",gap:6,children:[["Reveal Name","showName"],["Reveal Health","showHealth"],["Reveal Armour Class","showAC"],["Reveal Initiative","showInitiative"],["Show in Turn Order","displayOnTurnOrder"],["Hostile to Party","isHostile"],["Friendly to Party","isFriendly"]].map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(F.jsxs)(A.a,{display:"flex",alignItems:"center",children:[Object(F.jsx)(T.a,{mb:"0",fontSize:"xs",children:n}),Object(F.jsx)(je.a,{}),Object(F.jsx)(B,{name:i})]},i)}))})})]})]})]})})})},Ce=function(e){var t=e.npcs;return Object(F.jsx)(C.c,{children:t.map((function(e){return Object(F.jsx)(we,{npc:e},e.id)}))})};function Pe(e){var t=e.showHostile,n=e.showFriendly,i=e.showNeutral,c=Object(m.g)(),r=U((function(e){return e.npcs.npcs.filter((function(e){return!(!t||!e.isHostile)||(!(!n||!e.isFriendly)||!(!i||e.isFriendly||e.isHostile))})).filter((function(e){return!c.id||e.id===c.id}))})),s=G(),l=H.d({name:H.e().required().label("Name"),maxHP:H.c().integer().moreThan(0).required().label("Maximum HP"),initiativeMod:H.c().integer().required().label("Initiative Modifier"),armourClass:H.c().integer().moreThan(0).default(10).label("Armour Class")}),o=function(){var e=[["NPC Name","name",z],["Maximum HP","maxHP",D],["Initiative Modifier","initiativeMod",D],["Armour Class","armourClass",D]];return Object(F.jsx)(k.c,{initialValues:{name:"",maxHP:0,initiativeMod:0,armourClass:0},validationSchema:l,onSubmit:function(e){s(te({name:e.name,maxHP:e.maxHP,currentHP:e.maxHP,tempHP:0,initiative:Y(a.d20),initiativeMod:e.initiativeMod,armourClass:e.armourClass,conditions:[],displayOnTurnOrder:!0,notes:"",externalNotes:[],isFriendly:n||!1,isHostile:t||!1,isBoss:!1,showHealth:!1,showInitiative:!1,showAC:!1,showName:!1}))},children:Object(F.jsxs)(k.b,{children:[Object(F.jsx)(C.a,{children:e.map((function(e){var t=Object(y.a)(e,3),n=t[0],i=t[1],a=t[2];return Object(F.jsx)(a,{hideError:!0,mt:4,mb:4,name:i,label:n},i)}))}),Object(F.jsxs)(P.a,{mb:4,width:"100%",type:"submit",variant:"solid",colorScheme:"green",rightIcon:Object(F.jsx)(S.a,{as:w.a}),children:["Add"," ",t?"Enemy":"NPC"]})]})})};return Object(F.jsxs)(F.Fragment,{children:[!c.id&&Object(F.jsx)(o,{}),Object(F.jsx)(Ce,{npcs:r})]})}var Se=Object(Q.b)({name:"player",initialState:{players:[]},reducers:{addPlayer:function(e,t){var n=Object(X.a)();e.players.push(Object(I.a)(Object(I.a)({},t.payload),{},{id:n}))},removePlayer:function(e,t){var n=e.players.findIndex((function(e){return e.id===t.payload}));n>=0?e.players.splice(n,1):console.warn("Invalid player ".concat(t.payload))},refreshPlayers:function(e,t){var n;t.payload&&(n=e.players).splice.apply(n,[0,e.players.length].concat(Object(K.a)(t.payload)))},modifyPlayer:function(e,t){var n=e.players.findIndex((function(e){return e.id===t.payload.id}));if(n>=0){var i=e.players,a=t.payload;(t.payload.conditions||i[n].conditions).map((function(e){return e.toLowerCase()})).includes("dying")||(a.passedDeathSaves=0,a.failedDeathSaves=0),i[n]=Object(I.a)(Object(I.a)({},e.players[n]),t.payload)}},rollAllPlayerInitiative:function(e){e.players.forEach((function(e){e.initiative=Y(a.d20)}))}}}),ke=H.d({name:H.e(),currentHP:H.c().integer().required(),maxHP:H.c().integer().required(),tempHP:H.c().integer().default(0).required(),armourClass:H.c().integer().required(),initiative:H.c().integer().min(1).max(20).required(),initiativeMod:H.c().integer().required(),notes:H.e(),externalNotes:H.a().of(H.d({type:H.e(),url:H.e().url(),label:H.e()})),conditions:H.a().of(H.e()).required(),displayOnTurnOrder:H.b().required()}),He=Se.actions,Ie=He.addPlayer,Me=He.removePlayer,Ae=He.refreshPlayers,Te=He.rollAllPlayerInitiative,Ne=He.modifyPlayer,Fe=Se.reducer,Re=function(e){var t=e.player,n=G(),i=Object(m.g)(),c=function(){var e=Object(k.e)().setFieldValue;return Object(F.jsxs)(re.d,{children:[Object(F.jsxs)(re.b,{children:[Object(F.jsx)(L.a,{flex:"1",textAlign:"left",children:Object(F.jsx)("strong",{children:"Edit Stats"})}),Object(F.jsx)(re.c,{})]}),Object(F.jsx)(re.e,{children:Object(F.jsxs)(se.a,{fontSize:"sm",templateColumns:"repeat(4, 1fr)",templateRows:"repeat(2, 1fr)",gap:4,children:[Object(F.jsx)(se.b,{colSpan:4,children:Object(F.jsx)(P.a,{width:"100%",onClick:function(){return e("initiative",Y(a.d20))},variant:"outline",rightIcon:Object(F.jsx)(S.a,{as:v.c}),children:"Roll Initiative"})}),[["AC: ","armourClass"],["Initiative: ","initiative"],["Init. Mod: ","initiativeMod"],["Max HP: ","maxHP"]].map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(F.jsx)(se.b,{children:Object(F.jsxs)(C.a,{children:[Object(F.jsx)(le.a,{children:n}),Object(F.jsx)(D,{hideError:!0,name:i,width:"8em"})]})},i)}))]})})]})},r=function(e){var t=e.player,i=Object(k.e)();return Object(F.jsxs)(C.a,{mt:4,children:[Object(F.jsx)(oe.a,{label:"Save",placement:"top",children:Object(F.jsx)(P.a,{width:"100%",hidden:!i.dirty,variant:"solid",colorScheme:"green",onClick:function(){return i.submitForm()},children:Object(F.jsx)(S.a,{as:be.a})})}),Object(F.jsx)(oe.a,{label:"Reset",placement:"top",children:Object(F.jsx)(P.a,{width:"100%",type:"reset",hidden:!i.dirty,variant:"solid",children:Object(F.jsx)(S.a,{as:ue.a})})}),Object(F.jsx)(oe.a,{label:"Delete",placement:"top",children:Object(F.jsx)(P.a,{width:"100%",onClick:function(){return e=t.id,n(Me(e));var e},variant:"solid",colorScheme:"red",children:Object(F.jsx)(S.a,{as:g.a})})})]})};return Object(F.jsx)(k.c,{initialValues:Object(I.a)(Object(I.a)({},t),{},{externalNotes:t.externalNotes||[]}),onSubmit:function(e,i){n(Ne(e)),ye(t),i.resetForm()},onReset:function(){ye(t)},enableReinitialize:!0,validationSchema:ke,children:Object(F.jsx)(L.a,{className:"",width:"100%",id:"character-".concat(t.id),border:"0.3em solid #00AA00".concat(i.id===t.id?"FF":22),borderRadius:10,p:4,children:Object(F.jsxs)(k.b,{children:[Object(F.jsxs)(C.a,{p:1,mb:2,children:[Object(F.jsx)(L.a,{textAlign:"center",width:"100%",backgroundColor:"darkgreen",color:"white",borderRadius:8,p:2,children:Object(F.jsx)(le.a,{fontWeight:"bold",children:t.name})}),Object(F.jsx)(r,{player:t})]}),Object(F.jsxs)(de.a,{templateColumns:"repeat(3, 1fr)",mt:4,mb:4,children:[Object(F.jsx)(se.b,{children:Object(F.jsxs)(C.c,{alignItems:"flex-start",children:[Object(F.jsx)(me,{character:t}),Object(F.jsxs)(le.a,{children:["AC"," ",t.armourClass,", Init."," ",t.initiative+t.initiativeMod," ","(",t.initiative,Object(F.jsx)(S.a,{as:v.c})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]})}),Object(F.jsx)(se.b,{colSpan:2,children:Object(F.jsx)(Oe,{name:"notes",textareaProps:{resize:"vertical",height:"20em",fontSize:"xs"}})})]}),Object(F.jsx)(pe,{character:t}),Object(F.jsxs)(re.a,{allowToggle:!0,allowMultiple:!0,children:[Object(F.jsx)(ge,{character:t}),Object(F.jsx)(c,{}),Object(F.jsxs)(re.d,{children:[Object(F.jsxs)(re.b,{children:[Object(F.jsx)(L.a,{flex:"1",textAlign:"left",children:Object(F.jsx)("strong",{children:"Options"})}),Object(F.jsx)(re.c,{})]}),Object(F.jsx)(re.e,{children:Object(F.jsx)(se.a,{fontSize:"sm",templateColumns:"repeat(3, 1fr)",templateRows:"repeat(1, 1fr)",gap:6,children:[["Show in Turn Order","displayOnTurnOrder"]].map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(F.jsxs)(A.a,{display:"flex",alignItems:"center",children:[Object(F.jsx)(T.a,{mb:"0",children:n}),Object(F.jsx)(je.a,{}),Object(F.jsx)(B,{name:i})]},i)}))})})]})]})]})})})},Ee=function(e){var t=e.players;return Object(F.jsx)(C.c,{children:t.map((function(e){return Object(F.jsx)(Re,{player:e},e.id)}))})};function ze(){var e=Object(m.g)(),t=U((function(t){return t.players.players.filter((function(t){return!e.id||t.id===e.id}))})),n=G(),i=H.d({name:H.e().required().label("Name"),maxHP:H.c().integer().moreThan(0).required().label("Maximum HP"),initiativeMod:H.c().integer().required().label("Initiative Modifier"),armourClass:H.c().integer().moreThan(0).default(10).label("Armour Class")}),c=function(){var e=[["Player Name","name",z],["Maximum HP","maxHP",D],["Initiative Modifier","initiativeMod",D],["Armour Class","armourClass",D]];return Object(F.jsx)(k.c,{initialValues:{name:"",maxHP:0,initiativeMod:0,armourClass:0},validationSchema:i,onSubmit:function(e){n(Ie({name:e.name,maxHP:e.maxHP,currentHP:e.maxHP,tempHP:0,initiative:Y(a.d20),initiativeMod:e.initiativeMod,armourClass:e.armourClass,conditions:[],displayOnTurnOrder:!0,notes:"",externalNotes:[],passedDeathSaves:0,failedDeathSaves:0}))},children:Object(F.jsxs)(k.b,{children:[Object(F.jsx)(C.a,{children:e.map((function(e){var t=Object(y.a)(e,3),n=t[0],i=t[1],a=t[2];return Object(F.jsx)(a,{hideError:!0,mt:4,mb:4,name:i,label:n},i)}))}),Object(F.jsx)(P.a,{mb:4,width:"100%",type:"submit",variant:"solid",colorScheme:"green",rightIcon:Object(F.jsx)(S.a,{as:w.a}),children:"Add Player"})]})})};return Object(F.jsxs)(F.Fragment,{children:[!e.id&&Object(F.jsx)(c,{}),Object(F.jsx)(Ee,{players:t})]})}var qe=Object(Q.b)({name:"campaign",initialState:{currentTurnId:"",campaignTitle:"D&D Tracker"},reducers:{setTurn:function(e,t){e.currentTurnId=t.payload},setCampaignTitle:function(e,t){e.campaignTitle=t.payload}}}),De=qe.actions,We=De.setTurn,Le=De.setCampaignTitle,_e=qe.reducer,Ve="persistantState",Je="0.0.3",Be=function(){try{var e=localStorage.getItem("persistantState_".concat(Je));if(null===e)return;return JSON.parse(e)}catch(t){return void console.warn(t)}},Ge=Object(Q.a)({reducer:{players:Fe,campaign:_e,npcs:ce},preloadedState:Be()});Ge.subscribe((function(){document.hasFocus()&&function(e){try{var t=JSON.stringify(e);localStorage.setItem("persistantState_".concat(Je),t)}catch(n){console.warn(n)}}(Ge.getState())}));var Ue=n(361);function Ke(e){var t=e.npc,n=e.isActive,i=e.onClick,a=t.tempHP?" (".concat(t.tempHP,")"):"",c=Ct.neutral;return t.isHostile?c=Ct.enemy:t.isFriendly&&(c=Ct.friendly),Object(F.jsxs)(L.a,{className:"turn-block turn-block-npc",border:"".concat(n?"0.4em":"0.2em"," solid ").concat(c).concat(n?"FF":22),borderRadius:"0.4em",opacity:n?"100%":"80%",cursor:"pointer",onClick:i,children:[Object(F.jsxs)(se.a,{templateColumns:"repeat(4, 1fr)",fontSize:"sm",children:[Object(F.jsx)(le.a,{fontWeight:"bold",children:t.showName?t.name:"???"}),t.showAC&&Object(F.jsxs)(le.a,{children:[Object(F.jsx)(S.a,{as:v.b})," ",t.armourClass]}),t.showHealth?Object(F.jsxs)(le.a,{children:[Object(F.jsx)(S.a,{as:f.a})," ",t.currentHP," ",a," ","/"," ",t.maxHP]}):Object(F.jsxs)(le.a,{children:[Object(F.jsx)(S.a,{as:f.a})," ","Damage Taken:"," ",Math.max(t.maxHP-t.currentHP,0)]}),t.showInitiative&&Object(F.jsxs)(le.a,{children:[Object(F.jsx)(S.a,{as:v.e})," ",t.initiative+t.initiativeMod," ","(",t.initiative,Object(F.jsx)(S.a,{as:v.c})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]}),t.conditions.length>0&&Object(F.jsx)(C.a,{children:t.conditions.map((function(e){return Object(F.jsx)(Ue.a,{variant:"solid",children:e},t.conditions.findIndex((function(t){return e===t})))}))})]})}n(322);var Qe=n(6),Xe=n(152),Ye=n(153),Ze=function(e){var t=e.player,n=e.size,i=e.disableAction,a=G(),c=function(e,n){if(!i){var c="failedDeathSaves";"pass"===n&&(c="passedDeathSaves"),a(Ne(Object(Qe.a)({id:t.id},c,e)))}},r=function(e){return t.failedDeathSaves>=e?Object(F.jsx)(S.a,{as:Xe.a,color:"darkred"}):Object(F.jsx)(S.a,{as:Xe.b})},s=function(e){return t.passedDeathSaves>=e?Object(F.jsx)(S.a,{as:Ye.b,color:"green"}):Object(F.jsx)(S.a,{as:Ye.a})};return Object(F.jsxs)(b.a,{children:[[3,2,1].map((function(e){return Object(F.jsx)(ve.a,{size:n||"xs",variant:"ghost","aria-label":"Death Save Failed",icon:r(e),cursor:i?"default":"auto",pointerEvents:i?"none":"auto",onClick:function(){return t.failedDeathSaves===e?c(Math.max(e-1,0),"fail"):c(Math.max(e,0),"fail")},hidden:i&&t.failedDeathSaves<e},"failed-save-".concat(e))})),Object(F.jsx)(O.a,{orientation:"vertical"}),[1,2,3].map((function(e){return Object(F.jsx)(ve.a,{size:n||"xs",variant:"ghost","aria-label":"Death Save Suceeded",icon:s(e),cursor:i?"default":"auto",pointerEvents:i?"none":"auto",onClick:function(){return t.passedDeathSaves===e?c(Math.max(e-1,0),"pass"):c(Math.max(e,0),"pass")},hidden:i&&t.passedDeathSaves<e},"passed-save-".concat(e))}))]})};function $e(e){var t=e.player,n=e.isActive,i=e.onClick,a=t.tempHP?" (".concat(t.tempHP,")"):"";return Object(F.jsxs)(L.a,{onClick:i,className:"turn-block turn-block-player",border:"".concat(n?"0.4em":"0.2em"," solid #00AA00").concat(n?"FF":22),borderRadius:"0.4em",opacity:n?"100%":"80%",cursor:"pointer",children:[t.conditions.map((function(e){return e.toLowerCase()})).includes("dying")&&Object(F.jsx)(Ze,{player:t,size:"sm",disableAction:!0}),Object(F.jsxs)(se.a,{templateColumns:"repeat(4, 1fr)",fontSize:"sm",children:[Object(F.jsx)(le.a,{fontWeight:"bold",children:t.name}),Object(F.jsxs)(le.a,{children:[Object(F.jsx)(S.a,{as:v.b})," ",t.armourClass]}),Object(F.jsxs)(le.a,{children:[Object(F.jsx)(S.a,{as:f.a})," ",t.currentHP," ",a," ","/"," ",t.maxHP]}),Object(F.jsxs)(le.a,{children:[Object(F.jsx)(S.a,{as:v.e})," ",t.initiative+t.initiativeMod," ","(",t.initiative,Object(F.jsx)(S.a,{as:v.c})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]}),t.conditions.length>0&&Object(F.jsx)(C.a,{children:t.conditions.map((function(e){return Object(F.jsx)(Ue.a,{variant:"solid",children:e},t.conditions.findIndex((function(t){return e===t})))}))})]})}var et=function(e){var t=e.players,n=e.npcs,i=e.showAllTurns,a=e.currentTurnId,c=t.map((function(e){return{character:e,type:"player"}})),r=n.map((function(e){return{character:e,type:"npc"}})),s=[].concat(Object(K.a)(c),Object(K.a)(r)).filter((function(e){return i||e.character.displayOnTurnOrder})).sort((function(e,t){var n=e.character,i=t.character;return i.initiative+i.initiativeMod-(n.initiative+n.initiativeMod)})),l=function(e){return e.map((function(e,t){return{isActive:0===t,character:e.character,type:e.type}}))};if(!a)return l(s);var o=s.findIndex((function(e){return e.character.id===a}))||0;return l([].concat(Object(K.a)(s.slice(o+1,s.length)),Object(K.a)(s.slice(0,o+1))))};function tt(){var e=Object(m.f)(),t=function(t){var n=t.type,i=t.id;e.push("/".concat(n,"/").concat(i));!function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(t>=20)){var n=document.querySelector("#currentHP-".concat(i));n?n.focus():setTimeout((function(){e(t+1)}),50)}}()},n=U((function(e){return e.players.players})),i=U((function(e){return e.npcs.npcs})),a=U((function(e){return e.campaign.currentTurnId})),c=G(),r=et({players:n,npcs:i,showAllTurns:!1,currentTurnId:a});return Object(F.jsxs)(L.a,{children:[Object(F.jsxs)(C.c,{divider:Object(F.jsx)(C.b,{color:"gray.200"}),mb:2,children:[r.map((function(e){var n=e.character,i=e.isActive,a=e.type;if("player"===a){var c=n;return Object(F.jsx)($e,{onClick:function(){return t({type:"players",id:n.id})},isActive:i,player:c},n.id)}if("npc"===a){var r=n;return Object(F.jsx)(Ke,{onClick:function(){return t({type:r.isHostile?"enemies":"npcs",id:n.id})},isActive:i,npc:r},n.id)}return!1})),";"]}),Object(F.jsxs)(C.a,{position:"sticky",backgroundColor:"white",bottom:"0",width:"100%",children:[Object(F.jsxs)(P.a,{onClick:function(){c(Te()),c(We(""))},width:"100%",children:["Roll Initiative",Object(F.jsx)(S.a,{as:v.c})]}),Object(F.jsx)(P.a,{onClick:function(){if(!(r.length<1))if(a){var e=r.findIndex((function(e){return e.character.id===a}));if(e){var t=r[(e+1)%r.length];c(We(t.character.id))}else c(We(r[1].character.id))}else c(We(r[0].character.id))},width:"100%",children:"Next Turn"})]})]})}var nt=n(98),it=n.n(nt),at=n(154),ct=n(359),rt=n(363),st=n(30),lt=function(e){var t=e.confirmAction,n=Object(ct.a)(),i=n.isOpen,a=n.onOpen,r=n.onClose,s=Object(c.useRef)(null);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(P.a,{width:"100%",colorScheme:"red",onClick:a,children:"Clear State"}),Object(F.jsx)(rt.a,{isOpen:i,leastDestructiveRef:s,onClose:r,children:Object(F.jsx)(st.h,{children:Object(F.jsxs)(rt.b,{children:[Object(F.jsx)(st.g,{fontSize:"lg",fontWeight:"bold",children:"Clear State"}),Object(F.jsx)(st.b,{children:"Are you sure? This action cannot be undone."}),Object(F.jsxs)(st.f,{children:[Object(F.jsx)(P.a,{ref:s,onClick:r,children:"Cancel"}),Object(F.jsx)(P.a,{colorScheme:"red",onClick:function(){r(),t()},ml:3,children:"Delete"})]})]})})})]})},ot=function(){var e=U((function(e){return e})),t=Object(c.useState)(""),n=Object(y.a)(t,2),i=n[0],a=n[1],r=Object(c.useRef)(null),s=Object(c.useRef)(null),l=function(e){try{var t=JSON.parse(e);localStorage.setItem("".concat(Ve,"_").concat(Je),JSON.stringify(t.state)),window.location.reload()}catch(n){console.error("Failed to import state")}};return Object(c.useEffect)((function(){!function(){var t=new Blob([JSON.stringify({version:Je,state:e,date:Date.now()})],{type:"application/json"});""!==i&&window.URL.revokeObjectURL(i),a(window.URL.createObjectURL(t))}()}),[e]),Object(F.jsxs)(se.a,{templateColumns:"repeat(1, 1fr)",gap:5,children:[Object(F.jsxs)(_.a,{children:[Object(F.jsx)("input",{type:"file",accept:"application/json",onChange:function(){var e=Object(at.a)(it.a.mark((function e(t){var n,i,a;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(a=new FileReader).onload=function(){var e=Object(at.a)(it.a.mark((function e(t){var n,i;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"===typeof(i=null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.result)&&l(i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(null===(n=s.current)||void 0===n||null===(i=n.files)||void 0===i?void 0:i[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ref:s,hidden:!0}),Object(F.jsx)(P.a,{width:"100%",onClick:function(){var e;null===(e=s.current)||void 0===e||e.click()},children:"Import Saved State"})]}),Object(F.jsxs)(_.a,{children:[Object(F.jsx)("a",{hidden:!0,download:"".concat(Date.now(),"_").concat(Je,"_").concat(e.campaign.campaignTitle,".json"),href:i,ref:r,children:"Export"}),Object(F.jsx)(P.a,{width:"100%",onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.click()},children:"Export Save State"})]}),Object(F.jsx)(lt,{confirmAction:function(){localStorage.removeItem("".concat(Ve,"_").concat(Je)),window.location.reload()}})]})},dt=n(199),jt=function(){var e=U((function(e){return e.campaign.campaignTitle})),t=G(),n=function(e){return t(Le(e))},i=Object(c.useState)(e),a=Object(y.a)(i,2),s=a[0],l=a[1],o=Object(c.useState)(!1),d=Object(y.a)(o,2),j=d[0],u=d[1],b=r.a.useRef(null);return Object(F.jsxs)(_.a,{mb:4,width:"100%",justifyContent:"center",alignItems:"center",children:[!j&&Object(F.jsxs)(_.a,{justifyContent:"center",alignItems:"center",children:[Object(F.jsx)(h.a,{children:e}),Object(F.jsx)(ve.a,{ml:2,"aria-label":"Edit Title",icon:Object(F.jsx)(S.a,{as:dt.a}),onClick:function(){u(!0),setTimeout((function(){var e;null===(e=b.current)||void 0===e||e.focus()}),100)}})]}),j&&Object(F.jsxs)(_.a,{justifyContent:"center",alignItems:"center",children:[Object(F.jsx)(E.a,{ref:b,onChange:function(e){return l(e.target.value)},onKeyPress:function(e){"Enter"===e.code&&(u(!1),n(s))}}),Object(F.jsx)(ve.a,{ml:2,"aria-label":"Save",icon:Object(F.jsx)(S.a,{as:be.a}),onClick:function(){u(!1),n(s)}}),Object(F.jsx)(ve.a,{ml:2,"aria-label":"Reset",icon:Object(F.jsx)(S.a,{as:ue.a}),onClick:function(){return u(!1)}})]})]})},ut=n(365),bt=function(e){var t=e.to,n=e.label,i=e.activeOnlyWhenExact,a=e.icon,c=Object(m.f)(),r=Object(m.h)({path:t,exact:i});return Object(F.jsxs)(_.a,{cursor:"pointer",width:"100%",textAlign:"left",borderRadius:10,backgroundColor:r?"gray":void 0,p:2,fontWeight:"bold",color:r?"white":"black",onClick:function(){c.push(t)},alignItems:"center",children:[Object(F.jsx)(_.a,{width:"10%",children:a&&Object(F.jsx)(S.a,{as:a})}),Object(F.jsx)(le.a,{children:n})]})};var ht=function(e){var t=e.routes,n=function(){var e=r.a.useState({width:0,height:0}),t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){function e(){i({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}().width>1400,i=Object(ct.a)({defaultIsOpen:n}),a=i.isOpen,s=i.onOpen,l=i.onClose;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{className:"drawer-button",children:Object(F.jsx)(L.a,{pt:3,pb:3,pl:4,pr:4,cursor:"pointer",onClick:s,children:Object(F.jsx)(S.a,{as:v.d})})}),Object(F.jsxs)(ut.a,{isOpen:n||a,placement:"left",onClose:function(){n||l()},blockScrollOnMount:!n,variant:n?"alwaysOpen":void 0,trapFocus:!n,children:[!n&&Object(F.jsx)(st.h,{}),Object(F.jsxs)(ut.b,{children:[!n&&Object(F.jsx)(st.c,{}),Object(F.jsx)(st.g,{children:"Menu"}),Object(F.jsx)(st.b,{children:Object(F.jsx)(C.c,{spacing:0,children:t.map((function(e){var t=e.pageTitle,n=e.path,i=e.exact,a=e.icon;return Object(F.jsx)(bt,{to:n,label:t,activeOnlyWhenExact:i,icon:a},t)}))})}),Object(F.jsx)(st.f,{})]})]})]})},Ot=(n(324),n(200)),xt=n(201),pt=n(376),mt=n(329),ft=n(366);function vt(){var e=Object(m.f)(),t=Object(Ot.a)({defaultValue:[]}),n=t.value,i=t.setValue,a=Object(ct.a)(),r=a.isOpen,s=a.onOpen,l=a.onClose,o=Object(c.useRef)(null),d=U((function(e){return e.players.players})),j=U((function(e){return e.npcs.npcs})),u=U((function(e){return e.campaign.currentTurnId})),x=et({players:d,npcs:j,showAllTurns:!1,currentTurnId:u}),p=x.filter((function(e){return"player"===e.type})).map((function(e){return e.character})),w=x.filter((function(e){return"npc"===e.type&&e.character.isHostile})).map((function(e){return e.character})),k=G(),H=Object(c.useState)(0),I=Object(y.a)(H,2),M=I[0],A=I[1],T=Object(c.useState)(0),N=Object(y.a)(T,2),R=[{title:"Modify Health",prop:"currentHP",value:M,setMethod:A},{title:"Modify THP",prop:"tempHP",value:N[0],setMethod:N[1]}],z=function(e,t,i){if(0!==e||i){var a=[],c=d.filter((function(e){return n.includes(e.id)})),r=i?function(e){return{id:e.id,tempHP:"tempHP"===t?0:Math.max(e.tempHP,0),currentHP:"currentHP"===t?e.maxHP:e.currentHP}}:function(n){return Object(Qe.a)({id:n.id},t,"tempHP"===t?Math.max(n[t]+e,0):Math.min(n[t]+e,n.maxHP))};c.forEach((function(e){a.push(Ne(r(e)))})),j.filter((function(e){return n.includes(e.id)})).forEach((function(e){a.push(ae(r(e)))})),a.length&&a.map(k)}},D=[].concat(Object(K.a)(d),Object(K.a)(j)).reduce((function(e,t){return t.conditions.length&&t.conditions.forEach((function(t){e.includes(t)||e.push(t)})),e}),[]),W=Object(c.useState)(""),V=Object(y.a)(W,2),J=V[0],B=V[1],Q=Object(c.useState)(""),X=Object(y.a)(Q,2),Y=X[0],Z=X[1],$=function(e,t){if(e){var i=[],a=d.filter((function(e){return n.includes(e.id)})),c=function(n){var i=Object(K.a)(n),a=i.indexOf(e),c=a>-1;return"remove"===t&&c&&i.splice(a,1),"add"!==t||c||i.push(e),i};a.forEach((function(e){i.push(Ne({id:e.id,conditions:c(e.conditions)}))})),j.filter((function(e){return n.includes(e.id)})).forEach((function(e){i.push(ae({id:e.id,conditions:c(e.conditions)}))})),i.length&&i.map(k)}};return Object(F.jsx)(_.a,{children:Object(F.jsxs)(C.c,{width:"100%",children:[Object(F.jsxs)(C.a,{width:"100%",children:[Object(F.jsx)(P.a,{flexGrow:1,disabled:0===n.length,size:"xs",onClick:function(){return i([])},children:"Deselect All Characters"}),Object(F.jsx)(P.a,{flexGrow:1,onClick:function(){return i(p.map((function(e){return e.id})))},size:"xs",children:"Select All Players"}),Object(F.jsx)(P.a,{flexGrow:1,onClick:function(){return i(w.map((function(e){return e.id})))},size:"xs",children:"Select All Enemies"})]}),Object(F.jsx)(C.c,{width:"100%",spacing:1,children:Object(F.jsx)(xt.a,{defaultValue:[],value:n,onChange:i,children:x.map((function(t){var n=t.character,i=n,a=n,c=n.tempHP?" (".concat(n.tempHP,")"):"",r="";"player"===t.type?r="players":"npc"===t.type&&(r=i.isHostile?"enemies":"npcs");var s=Ct.neutral;return"players"===r?s=Ct.player:"enemies"===r?s=Ct.enemy:i.isFriendly&&(s=Ct.friendly),Object(F.jsxs)(L.a,{width:"100%",border:"0.1em solid ".concat(s),borderRadius:10,children:[n.conditions.map((function(e){return e.toLowerCase()})).includes("dying")&&"players"===r&&Object(F.jsx)(Ze,{player:a,size:"xs"}),Object(F.jsxs)(se.a,{alignItems:"center",templateColumns:"repeat(5, 1fr)",fontSize:"xs",pl:2,pr:2,gap:1,children:[Object(F.jsxs)(C.a,{children:[Object(F.jsx)(pt.a,{value:n.id,size:"lg"})," ",Object(F.jsx)(le.a,{fontWeight:"bold",fontSize:"xs",children:n.name})]}),Object(F.jsxs)(L.a,{children:[Object(F.jsx)(S.a,{as:v.b})," ",n.armourClass]}),Object(F.jsxs)(L.a,{children:[Object(F.jsx)(S.a,{as:f.a})," ",n.currentHP," ",c," ","/"," ",n.maxHP]}),Object(F.jsxs)(L.a,{children:[Object(F.jsx)(S.a,{as:v.e})," ",n.initiative+n.initiativeMod," ","(",n.initiative,Object(F.jsx)(S.a,{as:v.c})," ",n.initiativeMod>=0?"+":"-"," ",Math.abs(n.initiativeMod),")"]}),Object(F.jsx)(L.a,{children:Object(F.jsx)(ve.a,{"aria-label":"Go to character",icon:Object(F.jsx)(S.a,{as:g.c}),onClick:function(){return function(t){var n=t.type,i=t.id;e.push("/".concat(n,"/").concat(i)),function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(t>=20)){var n=document.querySelector("#currentHP-".concat(i));n?n.focus():setTimeout((function(){e(t+1)}),50)}}()}({id:n.id,type:r})},size:"xs",m:1})})]},n.id),n.conditions.length>0&&Object(F.jsx)(C.a,{pr:1,pl:1,pb:1,children:n.conditions.map((function(e){return Object(F.jsx)(Ue.a,{variant:"solid",children:e},e)}))})]},n.id)}))})}),Object(F.jsx)(_.a,{height:r&&o.current?"".concat(o.current.clientHeight,"px"):0}),Object(F.jsxs)(C.c,{width:"100%",position:"sticky",bottom:"0",backgroundColor:"white",p:2,children:[Object(F.jsx)(P.a,{width:"100%",onClick:s,display:r?"none":"visible",children:"Show Edit Panel"}),Object(F.jsx)(mt.a,{direction:"bottom",in:r,ref:o,children:Object(F.jsx)(b.a,{children:Object(F.jsxs)(C.c,{p:2,minW:"650",maxW:"800",backgroundColor:"white",children:[Object(F.jsx)(b.a,{children:Object(F.jsx)(h.a,{size:"md",children:"Edit Panel"})}),Object(F.jsx)(O.a,{}),Object(F.jsx)(P.a,{width:"100%",onClick:l,size:"xs",children:"Hide This Panel"}),Object(F.jsx)(O.a,{}),Object(F.jsxs)(C.a,{backgroundColor:"white",width:"100%",children:[Object(F.jsxs)(P.a,{onClick:function(){k(Te()),k(We(""))},width:"100%",children:["Roll Initiative",Object(F.jsx)(S.a,{as:v.c})]}),Object(F.jsx)(P.a,{onClick:function(){if(!(x.length<1))if(u){var e=x.findIndex((function(e){return e.character.id===u}));if(e){var t=x[(e+1)%x.length];k(We(t.character.id))}else k(We(x[1].character.id))}else k(We(x[0].character.id))},width:"100%",children:"Next Turn"})]}),Object(F.jsx)(O.a,{}),Object(F.jsx)(C.a,{width:"100%",children:R.map((function(e){var t=e.title,i=e.prop,a=e.value,c=e.setMethod;return Object(F.jsxs)(C.c,{width:"50%",children:[Object(F.jsx)(_.a,{flexGrow:1,children:Object(F.jsx)(h.a,{size:"s",children:t})}),Object(F.jsx)(C.a,{children:[-10,-5,-1,1,5,10].map((function(e){return Object(F.jsxs)(P.a,{size:"xs",onClick:function(){return z(e,i)},variant:"outline",disabled:!n.length,children:[e>0&&"+",e]},e)}))}),Object(F.jsxs)(C.a,{children:[Object(F.jsx)(P.a,{variant:"outline",disabled:!n.length,onClick:function(){return z(-a,i)},children:"-"}),Object(F.jsx)(q.c,{value:a,onChange:function(e){return c(Number(e)||0)},width:"6em",disabled:!n.length,children:Object(F.jsx)(q.d,{})}),Object(F.jsx)(P.a,{variant:"outline",disabled:!n.length,onClick:function(){return z(a,i)},children:"+"})]}),Object(F.jsx)(P.a,{size:"xs",variant:"outline",disabled:!n.length,onClick:function(){return z(0,i,!0)},children:"Reset"})]},t)}))}),Object(F.jsx)(O.a,{}),Object(F.jsxs)(C.c,{width:"100%",children:[Object(F.jsx)(h.a,{size:"s",children:"Modify Conditions"}),Object(F.jsxs)(C.a,{width:"100%",children:[Object(F.jsxs)(C.c,{width:"50%",children:[Object(F.jsx)(E.a,{placeholder:"Name of condition",disabled:!n.length,value:Y,onChange:function(e){return Z(e.target.value)}}),Object(F.jsx)(P.a,{width:"100%",disabled:!n.length,onClick:function(){return $(Y,"add")},children:"Add Condition"})]}),Object(F.jsxs)(C.c,{width:"50%",children:[Object(F.jsx)(ft.a,{placeholder:"Select condition to remove",disabled:!n.length||!D.length,value:J,onChange:function(e){return B(e.target.value)},children:D.map((function(e){return Object(F.jsx)("option",{value:e,children:e},e)}))}),Object(F.jsx)(P.a,{width:"100%",disabled:!n.length||!D.length,onClick:function(){return $(J,"remove")},children:"Remove Condition"})]})]})]})]})})})]})]})})}function gt(){var e=G();window.addEventListener("storage",(function(){var t,n,i,a,c=Be();document.hasFocus()||[Ae((null===c||void 0===c||null===(t=c.players)||void 0===t?void 0:t.players)||[]),ie((null===c||void 0===c||null===(n=c.npcs)||void 0===n?void 0:n.npcs)||[]),Le((null===c||void 0===c||null===(i=c.campaign)||void 0===i?void 0:i.campaignTitle)||""),We((null===c||void 0===c||null===(a=c.campaign)||void 0===a?void 0:a.currentTurnId)||"")].map(e)}));var t=[{component:Object(F.jsx)(tt,{}),path:"/",basePath:"/",exact:!0,pageTitle:"Turn Order",icon:x.a},{component:Object(F.jsx)(vt,{}),path:"/screen",basePath:"/screen",pageTitle:"Multi Edit",icon:x.c},{component:Object(F.jsx)(ze,{}),path:"/players",basePath:"/players/:id?",pageTitle:"Players",icon:f.b},{component:Object(F.jsx)(Pe,{showHostile:!0}),path:"/enemies",basePath:"/enemies/:id?",pageTitle:"Enemies",icon:v.a},{component:Object(F.jsx)(Pe,{showFriendly:!0,showNeutral:!0}),path:"/npcs",basePath:"/npcs/:id?",pageTitle:"Other NPCs",icon:g.b},{component:Object(F.jsx)(ot,{}),path:"/settings",basePath:"/settings",pageTitle:"Settings",icon:x.b}];return Object(F.jsx)("div",{className:"App",children:Object(F.jsxs)(p.a,{basename:"/dndtracker",children:[Object(F.jsx)(ht,{routes:t}),Object(F.jsxs)(u.a,{maxW:"800",minW:"650",children:[Object(F.jsx)(jt,{}),Object(F.jsx)(m.c,{children:t.map((function(e){var t=e.component,n=e.basePath,i=e.pageTitle,a=e.exact;return Object(F.jsxs)(m.a,{path:n,exact:a,children:[Object(F.jsx)(b.a,{children:Object(F.jsx)(h.a,{size:"md",children:i})}),Object(F.jsx)(O.a,{mt:4,mb:4}),t]},i)}))})]})]})})}var yt=n(368),wt=Object(yt.a)({components:{Drawer:{variants:{alwaysOpen:{dialog:{pointerEvents:"auto"},dialogContainer:{pointerEvents:"none"}}}}}}),Ct={enemy:"#AA0000",friendly:"#AAAA00",neutral:"#AAAAAA",player:"#00AA00"};l.a.render(Object(F.jsx)(d.a,{store:Ge,children:Object(F.jsx)(o.a,{theme:wt,children:Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(gt,{})})})}),document.getElementById("root")),j()}},[[325,1,2]]]);
//# sourceMappingURL=main.3193f18b.chunk.js.map