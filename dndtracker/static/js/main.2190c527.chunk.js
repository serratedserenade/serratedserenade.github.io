(this.webpackJsonpdndtracker=this.webpackJsonpdndtracker||[]).push([[0],{205:function(e,t,n){},309:function(e,t,n){},310:function(e,t,n){},311:function(e,t,n){"use strict";n.r(t);var i,a,r=n(1),c=n.n(r),s=n(74),l=n.n(s),o=(n(205),n(351)),d=n(96),j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,360)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))},b=n(345),u=n(346),h=n(343),O=n(337),x=n(139),m=n(79),p=n(24),f=n(78),v=n(27),g=n(85),y=n(5),C=n(359),P=n(354),w=n(191),H=n(86),I=n(18),S=n(9),M=n(13),A=n(54),T=n(69),k=n(327),F=n(328),N=n(2),q=function(e){var t=e.children,n=e.name,i=e.label,a=e.helperText,r=e.hideError,c=Object(A.a)(e,["children","name","label","helperText","hideError"]),s=Object(I.d)(n),l=Object(y.a)(s,2)[1],o=l.error,d=l.touched;return Object(N.jsxs)(T.a,Object(M.a)(Object(M.a)({isInvalid:!!o&&d},c),{},{children:[i&&Object(N.jsx)(k.a,{htmlFor:n,children:i}),t,!r&&o&&Object(N.jsx)(F.a,{children:o}),a&&Object(N.jsx)(T.b,{children:a})]}))},E=n(329),R=function(e){var t=e.name,n=e.label,i=e.inputProps,a=Object(A.a)(e,["name","label","inputProps"]),r=Object(I.d)(t),c=Object(y.a)(r,1)[0];return Object(N.jsx)(q,Object(M.a)(Object(M.a)({name:t,label:n},a),{},{children:Object(N.jsx)(E.a,Object(M.a)(Object(M.a)({},c),{},{id:t},i))}))},z=n(350),W=function(e){var t,n=e.name,i=e.label,a=e.showStepper,r=void 0===a||a,c=e.children,s=e.numberInputProps,l=Object(A.a)(e,["name","label","showStepper","children","numberInputProps"]),o=Object(I.d)(n),d=Object(y.a)(o,2),j=d[0],b=d[1],u=b.error,h=b.touched,O=Object(I.e)().setFieldValue;return Object(N.jsx)(q,Object(M.a)(Object(M.a)({name:n,label:i},l),{},{children:Object(N.jsxs)(z.c,Object(M.a)(Object(M.a)(Object(M.a)({},j),{},{id:n,onChange:(t=n,function(e){return O(t,Number(e))}),isInvalid:!!u&&h},s),{},{children:[Object(N.jsx)(z.d,{name:n}),r&&Object(N.jsxs)(z.e,{children:[Object(N.jsx)(z.b,{}),Object(N.jsx)(z.a,{})]}),c]}))}))},V=n(183),D=n(332),_=n(333),L=n(356),B=n(59),J=function(e){var t=e.name,n=e.label,a=e.switchProps,r=Object(A.a)(e,["name","label","switchProps"]),c=Object(I.d)(t),s=Object(y.a)(c,2),l=s[0],o=s[1],d=o.error,j=o.touched;return Object(N.jsx)(D.a,{css:Object(B.b)(i||(i=Object(V.a)(["\n        .chakra-form__label {\n          margin-bottom: 0;\n        }\n        .chakra-switch {\n          display: flex;\n          align-items: center;\n          margin-right: 0.75rem;\n        }\n        .chakra-form__error-message {\n          margin-top: 0;\n        }\n      "]))),children:Object(N.jsx)(q,Object(M.a)(Object(M.a)({name:t,label:n,as:_.a,alignItems:"center"},r),{},{children:Object(N.jsx)(L.a,Object(M.a)(Object(M.a)({},l),{},{id:t,isInvalid:!!d&&j,isChecked:l.value},a))}))})},K=function(){return Object(d.b)()},G=d.c,Q=n(12),U=n(68),X=n(353);!function(e){e[e.d100=100]="d100",e[e.d20=20]="d20",e[e.d12=12]="d12",e[e.d10=10]="d10",e[e.d8=8]="d8",e[e.d6=6]="d6",e[e.d4=4]="d4",e[e.d2=2]="d2"}(a||(a={}));var Y=function(e){return Math.ceil(Math.random()*e)},Z=Object(U.b)({name:"npc",initialState:{npcs:[]},reducers:{addNPC:function(e,t){var n=Object(X.a)();e.npcs.push(Object(M.a)(Object(M.a)({},t.payload),{},{id:n}))},removeNPC:function(e,t){var n=e.npcs.findIndex((function(e){return e.id===t.payload}));n>=0?e.npcs.splice(n,1):console.warn("Invalid NPC ".concat(t.payload))},refreshNPCs:function(e,t){var n;t.payload&&(n=e.npcs).splice.apply(n,[0,e.npcs.length].concat(Object(Q.a)(t.payload)))},modifyNPC:function(e,t){var n=e.npcs.findIndex((function(e){return e.id===t.payload.id}));n>=0&&(e.npcs[n]=Object(M.a)(Object(M.a)({},e.npcs[n]),t.payload))},rollAllNPCInitiative:function(e){e.npcs.forEach((function(e){e.initiative=Y(a.d20)}))}}}),$=S.d({name:S.e(),currentHP:S.c().integer().required(),maxHP:S.c().integer().required(),tempHP:S.c().integer().default(0).required(),armourClass:S.c().integer().required(),initiative:S.c().integer().min(1).max(20).required(),initiativeMod:S.c().integer().required(),notes:S.e(),conditions:S.a().of(S.e()).required(),displayOnTurnOrder:S.b().required(),isHostile:S.b().required(),isFriendly:S.b().required(),isBoss:S.b().required(),showHealth:S.b().required(),showInitiative:S.b().required(),showAC:S.b().required(),showName:S.b().required()}),ee=Z.actions,te=ee.addNPC,ne=ee.removeNPC,ie=ee.refreshNPCs,ae=(ee.rollAllNPCInitiative,ee.modifyNPC),re=Z.reducer,ce=n(352),se=n(185),le=n(336),oe=n(349),de=n(340),je=n(341),be=n(84),ue=n(83),he=n(335),Oe=function(e){var t=e.name,n=e.label,i=e.textareaProps,a=Object(A.a)(e,["name","label","textareaProps"]),r=Object(I.d)(t),c=Object(y.a)(r,1)[0];return Object(N.jsx)(q,Object(M.a)(Object(M.a)({name:t,label:n},a),{},{children:Object(N.jsx)(he.a,Object(M.a)(Object(M.a)({},c),{},{id:t},i))}))},xe=n(338),me=function(e){var t=e.character,n=Object(I.e)();return Object(N.jsx)(I.a,{name:"conditions",render:function(e){var i=function(){var n=document.querySelector("#tag-input-".concat(t.id));if(null===n||void 0===n?void 0:n.value){var i=n.value.toString();n.value="",e.push(i)}};return Object(N.jsxs)(D.a,{p:2,border:"1px solid #00000066",borderRadius:8,mb:2,children:[Object(N.jsx)(_.a,{justifyContent:"center",children:Object(N.jsx)(le.a,{fontWeight:"bold",children:"Conditions"})}),Object(N.jsx)(O.a,{mt:1,mb:1,opacity:"0.3"}),n.values.conditions.map((function(t,n){return Object(N.jsxs)(xe.a,{variant:"solid",borderRadius:"full",size:"lg",m:2,children:[Object(N.jsx)(xe.c,{children:t}),Object(N.jsx)(xe.b,{onClick:function(){return e.remove(n)}})]},t)})),Object(N.jsxs)(xe.a,{variant:"outline",borderRadius:"full",size:"lg",m:2,children:[Object(N.jsx)(E.a,{size:"xs",id:"tag-input-".concat(t.id),onKeyPress:function(e){"Enter"===e.code&&i()}}),Object(N.jsx)(xe.d,{as:C.a,cursor:"pointer",onClick:function(){i()}})]})]})}})},pe=function(e){var t=e.npc,n=K(),i=Object(p.g)(),r=it.neutral;t.isHostile?r=it.enemy:t.isFriendly&&(r=it.friendly);var c=function(){var e=Object(I.e)().setFieldValue;return Object(N.jsxs)(ce.d,{children:[Object(N.jsxs)(ce.b,{children:[Object(N.jsx)(D.a,{flex:"1",textAlign:"left",children:Object(N.jsx)("strong",{children:"Edit Stats"})}),Object(N.jsx)(ce.c,{})]}),Object(N.jsx)(ce.e,{children:Object(N.jsxs)(se.a,{fontSize:"sm",templateColumns:"repeat(4, 1fr)",templateRows:"repeat(2, 1fr)",gap:4,children:[Object(N.jsx)(se.b,{colSpan:4,children:Object(N.jsx)(w.a,{width:"100%",onClick:function(){return e("initiative",Y(a.d20))},variant:"outline",rightIcon:Object(N.jsx)(H.a,{as:v.c}),children:"Roll Initiative"})}),[["AC: ","armourClass"],["Initiative: ","initiative"],["Init. Mod: ","initiativeMod"],["Max HP: ","maxHP"]].map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(N.jsx)(se.b,{children:Object(N.jsxs)(P.a,{children:[Object(N.jsx)(le.a,{children:n}),Object(N.jsx)(W,{hideError:!0,name:i,width:"8em"})]})},i)}))]})})]})},s=function(e){var t=e.npc,i=Object(I.e)();return Object(N.jsxs)(P.a,{mt:4,children:[Object(N.jsx)(oe.a,{label:"Save",placement:"top",children:Object(N.jsx)(w.a,{width:"100%",hidden:!i.dirty,variant:"solid",colorScheme:"green",onClick:function(){return i.submitForm()},children:Object(N.jsx)(H.a,{as:ue.a})})}),Object(N.jsx)(oe.a,{label:"Reset",placement:"top",children:Object(N.jsx)(w.a,{width:"100%",type:"reset",hidden:!i.dirty,variant:"solid",children:Object(N.jsx)(H.a,{as:be.a})})}),Object(N.jsx)(oe.a,{label:"Delete",placement:"top",children:Object(N.jsx)(w.a,{width:"100%",onClick:function(){return e=t.id,n(ne(e));var e},variant:"solid",colorScheme:"red",children:Object(N.jsx)(H.a,{as:g.a})})})]})};return Object(N.jsx)(I.c,{initialValues:t,onSubmit:function(e,t){n(ae(e)),t.resetForm()},enableReinitialize:!0,validationSchema:$,children:Object(N.jsx)(D.a,{className:"",width:"100%",id:"character-".concat(t.id),border:"0.3em solid ".concat(r).concat(i.id===t.id?"FF":22),borderRadius:10,p:4,children:Object(N.jsxs)(I.b,{children:[Object(N.jsxs)(P.a,{p:1,mb:2,children:[Object(N.jsx)(D.a,{textAlign:"center",width:"100%",backgroundColor:r,color:"white",borderRadius:8,p:2,children:Object(N.jsx)(le.a,{fontWeight:"bold",children:t.name})}),Object(N.jsx)(s,{npc:t})]}),Object(N.jsxs)(de.a,{templateColumns:"repeat(3, 1fr)",mt:4,mb:4,children:[Object(N.jsx)(se.b,{children:Object(N.jsxs)(P.c,{alignItems:"flex-start",children:[Object(N.jsx)(D.a,{children:Object(N.jsxs)(P.a,{children:[Object(N.jsx)(le.a,{fontWeight:"bold",children:"THP "}),Object(N.jsx)(W,{hideError:!0,name:"tempHP",width:"6em"})]})}),Object(N.jsx)(D.a,{children:Object(N.jsxs)(P.a,{children:[Object(N.jsx)(le.a,{fontWeight:"bold",children:"HP "}),Object(N.jsx)(W,{hideError:!0,name:"currentHP",width:"6em"}),Object(N.jsxs)(le.a,{children:["/"," ",t.maxHP]})]})}),Object(N.jsxs)(le.a,{children:["AC"," ",t.armourClass,", Init."," ",t.initiative+t.initiativeMod," ","(",t.initiative,Object(N.jsx)(H.a,{as:v.c})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]})}),Object(N.jsx)(se.b,{colSpan:2,children:Object(N.jsx)(Oe,{name:"notes",textareaProps:{resize:"none",height:"10em"}})})]}),Object(N.jsx)(me,{character:t}),Object(N.jsxs)(ce.a,{allowToggle:!0,allowMultiple:!0,children:[Object(N.jsx)(c,{}),Object(N.jsxs)(ce.d,{children:[Object(N.jsxs)(ce.b,{children:[Object(N.jsx)(D.a,{flex:"1",textAlign:"left",children:Object(N.jsx)("strong",{children:"Options"})}),Object(N.jsx)(ce.c,{})]}),Object(N.jsx)(ce.e,{children:Object(N.jsx)(se.a,{fontSize:"sm",templateColumns:"repeat(4, 1fr)",templateRows:"repeat(2, 1fr)",gap:6,children:[["Reveal Name","showName"],["Reveal Health","showHealth"],["Reveal Armour Class","showAC"],["Reveal Initiative","showInitiative"],["Show in Turn Order","displayOnTurnOrder"],["Hostile to Party","isHostile"],["Friendly to Party","isFriendly"]].map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(N.jsxs)(T.a,{display:"flex",alignItems:"center",children:[Object(N.jsx)(k.a,{mb:"0",fontSize:"xs",children:n}),Object(N.jsx)(je.a,{}),Object(N.jsx)(J,{name:i})]},i)}))})})]})]})]})})})},fe=function(e){var t=e.npcs;return Object(N.jsx)(P.c,{children:t.map((function(e){return Object(N.jsx)(pe,{npc:e},e.id)}))})};function ve(e){var t=e.showHostile,n=e.showFriendly,i=e.showNeutral,r=G((function(e){return e.npcs.npcs.filter((function(e){return!(!t||!e.isHostile)||(!(!n||!e.isFriendly)||!(!i||e.isFriendly||e.isHostile))}))})),c=K(),s=S.d({name:S.e().required().label("Name"),maxHP:S.c().integer().moreThan(0).required().label("Maximum HP"),initiativeMod:S.c().integer().required().label("Initiative Modifier"),armourClass:S.c().integer().moreThan(0).default(10).label("Armour Class")}),l=function(){var e=[["NPC Name","name",R],["Maximum HP","maxHP",W],["Initiative Modifier","initiativeMod",W],["Armour Class","armourClass",W]];return Object(N.jsx)(I.c,{initialValues:{name:"",maxHP:0,initiativeMod:0,armourClass:0},validationSchema:s,onSubmit:function(e){c(te({name:e.name,maxHP:e.maxHP,currentHP:e.maxHP,tempHP:0,initiative:Y(a.d20),initiativeMod:e.initiativeMod,armourClass:e.armourClass,conditions:[],displayOnTurnOrder:!0,notes:"",isFriendly:n||!1,isHostile:t||!1,isBoss:!1,showHealth:!1,showInitiative:!1,showAC:!1,showName:!1}))},children:Object(N.jsxs)(I.b,{children:[Object(N.jsx)(P.a,{children:e.map((function(e){var t=Object(y.a)(e,3),n=t[0],i=t[1],a=t[2];return Object(N.jsx)(a,{hideError:!0,mt:4,mb:4,name:i,label:n},i)}))}),Object(N.jsxs)(w.a,{mb:4,width:"100%",type:"submit",variant:"solid",colorScheme:"green",rightIcon:Object(N.jsx)(H.a,{as:C.a}),children:["Add"," ",t?"Enemy":"NPC"]})]})})};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(l,{}),Object(N.jsx)(fe,{npcs:r})]})}var ge=Object(U.b)({name:"player",initialState:{players:[]},reducers:{addPlayer:function(e,t){var n=Object(X.a)();e.players.push(Object(M.a)(Object(M.a)({},t.payload),{},{id:n}))},removePlayer:function(e,t){var n=e.players.findIndex((function(e){return e.id===t.payload}));n>=0?e.players.splice(n,1):console.warn("Invalid player ".concat(t.payload))},refreshPlayers:function(e,t){var n;t.payload&&(n=e.players).splice.apply(n,[0,e.players.length].concat(Object(Q.a)(t.payload)))},modifyPlayer:function(e,t){var n=e.players.findIndex((function(e){return e.id===t.payload.id}));n>=0&&(e.players[n]=Object(M.a)(Object(M.a)({},e.players[n]),t.payload))},rollAllPlayerInitiative:function(e){e.players.forEach((function(e){e.initiative=Y(a.d20)}))}}}),ye=S.d({name:S.e(),currentHP:S.c().integer().required(),maxHP:S.c().integer().required(),tempHP:S.c().integer().default(0).required(),armourClass:S.c().integer().required(),initiative:S.c().integer().min(1).max(20).required(),initiativeMod:S.c().integer().required(),notes:S.e(),conditions:S.a().of(S.e()).required(),displayOnTurnOrder:S.b().required()}),Ce=ge.actions,Pe=Ce.addPlayer,we=Ce.removePlayer,He=Ce.refreshPlayers,Ie=Ce.rollAllPlayerInitiative,Se=Ce.modifyPlayer,Me=ge.reducer,Ae=function(e){var t=e.player,n=K(),i=Object(p.g)(),r=function(){var e=Object(I.e)().setFieldValue;return Object(N.jsxs)(ce.d,{children:[Object(N.jsxs)(ce.b,{children:[Object(N.jsx)(D.a,{flex:"1",textAlign:"left",children:Object(N.jsx)("strong",{children:"Edit Stats"})}),Object(N.jsx)(ce.c,{})]}),Object(N.jsx)(ce.e,{children:Object(N.jsxs)(se.a,{fontSize:"sm",templateColumns:"repeat(4, 1fr)",templateRows:"repeat(2, 1fr)",gap:4,children:[Object(N.jsx)(se.b,{colSpan:4,children:Object(N.jsx)(w.a,{width:"100%",onClick:function(){return e("initiative",Y(a.d20))},variant:"outline",rightIcon:Object(N.jsx)(H.a,{as:v.c}),children:"Roll Initiative"})}),[["AC: ","armourClass"],["Initiative: ","initiative"],["Init. Mod: ","initiativeMod"],["Max HP: ","maxHP"]].map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(N.jsx)(se.b,{children:Object(N.jsxs)(P.a,{children:[Object(N.jsx)(le.a,{children:n}),Object(N.jsx)(W,{hideError:!0,name:i,width:"8em"})]})},i)}))]})})]})},c=function(e){var t=e.player,i=Object(I.e)();return Object(N.jsxs)(P.a,{mt:4,children:[Object(N.jsx)(oe.a,{label:"Save",placement:"top",children:Object(N.jsx)(w.a,{width:"100%",hidden:!i.dirty,variant:"solid",colorScheme:"green",onClick:function(){return i.submitForm()},children:Object(N.jsx)(H.a,{as:ue.a})})}),Object(N.jsx)(oe.a,{label:"Reset",placement:"top",children:Object(N.jsx)(w.a,{width:"100%",type:"reset",hidden:!i.dirty,variant:"solid",children:Object(N.jsx)(H.a,{as:be.a})})}),Object(N.jsx)(oe.a,{label:"Delete",placement:"top",children:Object(N.jsx)(w.a,{width:"100%",onClick:function(){return e=t.id,n(we(e));var e},variant:"solid",colorScheme:"red",children:Object(N.jsx)(H.a,{as:g.a})})})]})};return Object(N.jsx)(I.c,{initialValues:t,onSubmit:function(e,t){n(Se(e)),t.resetForm()},enableReinitialize:!0,validationSchema:ye,children:Object(N.jsx)(D.a,{className:"",width:"100%",id:"character-".concat(t.id),border:"0.3em solid #00AA00".concat(i.id===t.id?"FF":22),borderRadius:10,p:4,children:Object(N.jsxs)(I.b,{children:[Object(N.jsxs)(P.a,{p:1,mb:2,children:[Object(N.jsx)(D.a,{textAlign:"center",width:"100%",backgroundColor:"darkgreen",color:"white",borderRadius:8,p:2,children:Object(N.jsx)(le.a,{fontWeight:"bold",children:t.name})}),Object(N.jsx)(c,{player:t})]}),Object(N.jsxs)(de.a,{templateColumns:"repeat(3, 1fr)",mt:4,mb:4,children:[Object(N.jsx)(se.b,{children:Object(N.jsxs)(P.c,{alignItems:"flex-start",children:[Object(N.jsx)(D.a,{children:Object(N.jsxs)(P.a,{children:[Object(N.jsx)(le.a,{fontWeight:"bold",children:"THP "}),Object(N.jsx)(W,{hideError:!0,name:"tempHP",width:"6em"})]})}),Object(N.jsx)(D.a,{children:Object(N.jsxs)(P.a,{children:[Object(N.jsx)(le.a,{fontWeight:"bold",children:"HP "}),Object(N.jsx)(W,{hideError:!0,name:"currentHP",width:"6em"}),Object(N.jsxs)(le.a,{children:["/"," ",t.maxHP]})]})}),Object(N.jsxs)(le.a,{children:["AC"," ",t.armourClass,", Init."," ",t.initiative+t.initiativeMod," ","(",t.initiative,Object(N.jsx)(H.a,{as:v.c})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]})}),Object(N.jsx)(se.b,{colSpan:2,children:Object(N.jsx)(Oe,{name:"notes",textareaProps:{resize:"none",height:"10em"}})})]}),Object(N.jsx)(me,{character:t}),Object(N.jsxs)(ce.a,{allowToggle:!0,allowMultiple:!0,children:[Object(N.jsx)(r,{}),Object(N.jsxs)(ce.d,{children:[Object(N.jsxs)(ce.b,{children:[Object(N.jsx)(D.a,{flex:"1",textAlign:"left",children:Object(N.jsx)("strong",{children:"Options"})}),Object(N.jsx)(ce.c,{})]}),Object(N.jsx)(ce.e,{children:Object(N.jsx)(se.a,{fontSize:"sm",templateColumns:"repeat(3, 1fr)",templateRows:"repeat(1, 1fr)",gap:6,children:[["Show in Turn Order","displayOnTurnOrder"]].map((function(e){var t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(N.jsxs)(T.a,{display:"flex",alignItems:"center",children:[Object(N.jsx)(k.a,{mb:"0",children:n}),Object(N.jsx)(je.a,{}),Object(N.jsx)(J,{name:i})]},i)}))})})]})]})]})})})},Te=function(e){var t=e.players;return Object(N.jsx)(P.c,{children:t.map((function(e){return Object(N.jsx)(Ae,{player:e},e.id)}))})};function ke(){var e=G((function(e){return e.players.players})),t=K(),n=S.d({name:S.e().required().label("Name"),maxHP:S.c().integer().moreThan(0).required().label("Maximum HP"),initiativeMod:S.c().integer().required().label("Initiative Modifier"),armourClass:S.c().integer().moreThan(0).default(10).label("Armour Class")}),i=function(){var e=[["Player Name","name",R],["Maximum HP","maxHP",W],["Initiative Modifier","initiativeMod",W],["Armour Class","armourClass",W]];return Object(N.jsx)(I.c,{initialValues:{name:"",maxHP:0,initiativeMod:0,armourClass:0},validationSchema:n,onSubmit:function(e){t(Pe({name:e.name,maxHP:e.maxHP,currentHP:e.maxHP,tempHP:0,initiative:Y(a.d20),initiativeMod:e.initiativeMod,armourClass:e.armourClass,conditions:[],displayOnTurnOrder:!0,notes:""}))},children:Object(N.jsxs)(I.b,{children:[Object(N.jsx)(P.a,{children:e.map((function(e){var t=Object(y.a)(e,3),n=t[0],i=t[1],a=t[2];return Object(N.jsx)(a,{hideError:!0,mt:4,mb:4,name:i,label:n},i)}))}),Object(N.jsx)(w.a,{mb:4,width:"100%",type:"submit",variant:"solid",colorScheme:"green",rightIcon:Object(N.jsx)(H.a,{as:C.a}),children:"Add Player"})]})})};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(i,{}),Object(N.jsx)(Te,{players:e})]})}var Fe=Object(U.b)({name:"campaign",initialState:{currentTurnId:"",campaignTitle:"D&D Tracker"},reducers:{setTurn:function(e,t){e.currentTurnId=t.payload},setCampaignTitle:function(e,t){e.campaignTitle=t.payload}}}),Ne=Fe.actions,qe=Ne.setTurn,Ee=Ne.setCampaignTitle,Re=Fe.reducer,ze="0.0.2",We=function(){try{var e=localStorage.getItem("persistantState_".concat(ze));if(null===e)return;return JSON.parse(e)}catch(t){return void console.warn(t)}},Ve=Object(U.a)({reducer:{players:Me,campaign:Re,npcs:re},preloadedState:We()});Ve.subscribe((function(){document.hasFocus()&&function(e){try{var t=JSON.stringify(e);localStorage.setItem("persistantState_".concat(ze),t)}catch(n){console.warn(n)}}(Ve.getState())}));var De=n(342);function _e(e){var t=e.npc,n=e.isActive,i=e.onClick,a=t.tempHP?" (".concat(t.tempHP,")"):"",r=it.neutral;return t.isHostile?r=it.enemy:t.isFriendly&&(r=it.friendly),Object(N.jsxs)(D.a,{className:"turn-block turn-block-npc",border:"".concat(n?"0.4em":"0.2em"," solid ").concat(r).concat(n?"FF":22),borderRadius:"0.4em",opacity:n?"100%":"80%",cursor:"pointer",onClick:i,children:[Object(N.jsxs)(se.a,{templateColumns:"repeat(3, 1fr)",fontSize:"sm",children:[Object(N.jsx)(le.a,{fontWeight:"bold",children:t.showName?t.name:"???"}),t.showAC&&Object(N.jsxs)(le.a,{children:[Object(N.jsx)(H.a,{as:v.b})," ",t.armourClass]}),t.showHealth?Object(N.jsxs)(le.a,{children:[Object(N.jsx)(H.a,{as:f.a})," ",t.currentHP," ",a," ","/"," ",t.maxHP]}):Object(N.jsxs)(le.a,{children:[Object(N.jsx)(H.a,{as:f.a})," ","Damage Taken:"," ",t.maxHP-t.currentHP]}),t.showInitiative&&Object(N.jsxs)(le.a,{children:[Object(N.jsx)(H.a,{as:v.e})," ",t.initiative+t.initiativeMod," ","(",t.initiative,Object(N.jsx)(H.a,{as:v.c})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]}),t.conditions.length>0&&Object(N.jsx)(P.a,{children:t.conditions.map((function(e){return Object(N.jsx)(De.a,{variant:"solid",children:e},t.conditions.findIndex((function(t){return e===t})))}))})]})}n(309);function Le(e){var t=e.player,n=e.isActive,i=e.onClick,a=t.tempHP?" (".concat(t.tempHP,")"):"";return Object(N.jsxs)(D.a,{onClick:i,className:"turn-block turn-block-player",border:"".concat(n?"0.4em":"0.2em"," solid #00AA00").concat(n?"FF":22),borderRadius:"0.4em",opacity:n?"100%":"80%",cursor:"pointer",children:[Object(N.jsxs)(se.a,{templateColumns:"repeat(4, 1fr)",fontSize:"sm",children:[Object(N.jsx)(le.a,{fontWeight:"bold",children:t.name}),Object(N.jsxs)(le.a,{children:[Object(N.jsx)(H.a,{as:v.b})," ",t.armourClass]}),Object(N.jsxs)(le.a,{children:[Object(N.jsx)(H.a,{as:f.a})," ",t.currentHP," ",a," ","/"," ",t.maxHP]}),Object(N.jsxs)(le.a,{children:[Object(N.jsx)(H.a,{as:v.e})," ",t.initiative+t.initiativeMod," ","(",t.initiative,Object(N.jsx)(H.a,{as:v.c})," ",t.initiativeMod>=0?"+":"-"," ",Math.abs(t.initiativeMod),")"]})]}),t.conditions.length>0&&Object(N.jsx)(P.a,{children:t.conditions.map((function(e){return Object(N.jsx)(De.a,{variant:"solid",children:e},t.conditions.findIndex((function(t){return e===t})))}))})]})}function Be(){var e=Object(p.f)(),t=function(t){var n=t.type,i=t.id;e.push("/".concat(n,"/").concat(i));var a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=10;if(!(n>i)){var a=document.querySelector("#character-".concat(t));a?a.scrollIntoView(!0):setTimeout((function(){e(t,n+1)}),50)}};setTimeout((function(){a(i)}),50)},n=G((function(e){return e.players.players})),i=G((function(e){return e.npcs.npcs})),a=G((function(e){return e.campaign.currentTurnId})),r=K(),c=function(){var e=n.map((function(e){return{character:e,type:"player"}})),t=i.map((function(e){return{character:e,type:"npc"}})),r=[].concat(Object(Q.a)(e),Object(Q.a)(t)).filter((function(e){return e.character.displayOnTurnOrder})).sort((function(e,t){var n=e.character,i=t.character;return i.initiative+i.initiativeMod-(n.initiative+n.initiativeMod)})),c=function(e){return e.filter((function(e){return e.character.displayOnTurnOrder})).map((function(e,t){return{isActive:0===t,character:e.character,type:e.type}}))};if(!a)return c(r);var s=r.findIndex((function(e){return e.character.id===a}))||0;return c([].concat(Object(Q.a)(r.slice(s+1,r.length)),Object(Q.a)(r.slice(0,s+1))))};return Object(N.jsxs)(D.a,{mb:20,children:[Object(N.jsxs)(P.c,{divider:Object(N.jsx)(P.b,{color:"gray.200"}),children:[c().map((function(e){var n=e.character,i=e.isActive,a=e.type;if("player"===a)return Object(N.jsx)(Le,{onClick:function(){return t({type:"players",id:n.id})},isActive:i,player:n},n.id);if("npc"===a){var r=n;return Object(N.jsx)(_e,{onClick:function(){return t({type:"enemies",id:n.id})},isActive:i,npc:r},n.id)}return!1})),";"]}),Object(N.jsxs)(P.a,{position:"fixed",bottom:"0",left:"0",backgroundColor:"white",width:"100%",children:[Object(N.jsxs)(w.a,{onClick:function(){r(Ie()),r(qe(""))},width:"100%",children:["Roll Initiative",Object(N.jsx)(H.a,{as:v.c})]}),Object(N.jsx)(w.a,{onClick:function(){var e=c();if(!(c().length<1))if(a){var t=e.findIndex((function(e){return e.character.id===a}));if(t){var n=e[(t+1)%e.length];r(qe(n.character.id))}else r(qe(e[1].character.id))}else r(qe(e[0].character.id))},width:"100%",children:"Next Turn"})]})]})}var Je=function(){return Object(N.jsxs)(se.a,{templateColumns:"repeat(1, 1fr)",gap:5,children:[Object(N.jsx)(_.a,{children:Object(N.jsx)(w.a,{width:"100%",children:"Import Saved State"})}),Object(N.jsx)(_.a,{children:Object(N.jsx)(w.a,{width:"100%",children:"Import Characters"})}),Object(N.jsx)(_.a,{children:Object(N.jsx)(w.a,{width:"100%",children:"Export Save State"})}),Object(N.jsx)(_.a,{children:Object(N.jsx)(w.a,{width:"100%",children:"Export Characters"})}),Object(N.jsx)(_.a,{children:Object(N.jsx)(w.a,{width:"100%",colorScheme:"red",children:"Clear State"})}),Object(N.jsx)(_.a,{children:Object(N.jsx)(w.a,{width:"100%",colorScheme:"red",children:"Clear Characters"})})]})},Ke=n(344),Ge=n(187),Qe=function(){var e=G((function(e){return e.campaign.campaignTitle})),t=K(),n=function(e){return t(Ee(e))},i=Object(r.useState)(e),a=Object(y.a)(i,2),s=a[0],l=a[1],o=Object(r.useState)(!1),d=Object(y.a)(o,2),j=d[0],b=d[1],u=c.a.useRef(null);return Object(N.jsxs)(_.a,{mb:4,width:"100%",justifyContent:"center",alignItems:"center",children:[!j&&Object(N.jsxs)(_.a,{justifyContent:"center",alignItems:"center",children:[Object(N.jsx)(h.a,{children:e}),Object(N.jsx)(Ke.a,{ml:2,"aria-label":"Edit Title",icon:Object(N.jsx)(H.a,{as:Ge.a}),onClick:function(){b(!0),setTimeout((function(){var e;null===(e=u.current)||void 0===e||e.focus()}),100)}})]}),j&&Object(N.jsxs)(_.a,{justifyContent:"center",alignItems:"center",children:[Object(N.jsx)(E.a,{ref:u,onChange:function(e){return l(e.target.value)},onKeyPress:function(e){"Enter"===e.code&&(b(!1),n(s))}}),Object(N.jsx)(Ke.a,{ml:2,"aria-label":"Save",icon:Object(N.jsx)(H.a,{as:ue.a}),onClick:function(){b(!1),n(s)}}),Object(N.jsx)(Ke.a,{ml:2,"aria-label":"Reset",icon:Object(N.jsx)(H.a,{as:be.a}),onClick:function(){return b(!1)}})]})]})},Ue=n(339),Xe=n(358),Ye=n(52),Ze=function(e){var t=e.to,n=e.label,i=e.activeOnlyWhenExact,a=e.icon,r=Object(p.f)(),c=Object(p.h)({path:t,exact:i});return Object(N.jsxs)(_.a,{cursor:"pointer",width:"100%",textAlign:"left",borderRadius:10,backgroundColor:c?"gray":void 0,p:2,fontWeight:"bold",color:c?"white":"black",onClick:function(){r.push(t)},alignItems:"center",children:[Object(N.jsx)(_.a,{width:"10%",children:a&&Object(N.jsx)(H.a,{as:a})}),Object(N.jsx)(le.a,{children:n})]})};var $e=function(e){var t=e.routes,n=function(){var e=c.a.useState({width:0,height:0}),t=Object(y.a)(e,2),n=t[0],i=t[1];return Object(r.useEffect)((function(){function e(){i({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}().width>1400,i=Object(Ue.a)({defaultIsOpen:n}),a=i.isOpen,s=i.onOpen,l=i.onClose;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"drawer-button",children:Object(N.jsx)(D.a,{pt:3,pb:3,pl:4,pr:4,cursor:"pointer",onClick:s,children:Object(N.jsx)(H.a,{as:v.d})})}),Object(N.jsxs)(Xe.a,{isOpen:n||a,placement:"left",onClose:function(){n||l()},blockScrollOnMount:!n,variant:n?"alwaysOpen":void 0,trapFocus:!n,children:[!n&&Object(N.jsx)(Ye.g,{}),Object(N.jsxs)(Xe.b,{children:[!n&&Object(N.jsx)(Ye.c,{}),Object(N.jsx)(Ye.f,{children:"Menu"}),Object(N.jsx)(Ye.b,{children:Object(N.jsx)(P.c,{spacing:0,children:t.map((function(e){var t=e.pageTitle,n=e.path,i=e.exact,a=e.icon;return Object(N.jsx)(Ze,{to:n,label:t,activeOnlyWhenExact:i,icon:a},t)}))})}),Object(N.jsx)(Ye.e,{})]})]})]})};n(310);function et(){var e=K();window.addEventListener("storage",(function(){var t,n,i,a,r=We();document.hasFocus()||[He((null===r||void 0===r||null===(t=r.players)||void 0===t?void 0:t.players)||[]),ie((null===r||void 0===r||null===(n=r.npcs)||void 0===n?void 0:n.npcs)||[]),Ee((null===r||void 0===r||null===(i=r.campaign)||void 0===i?void 0:i.campaignTitle)||""),qe((null===r||void 0===r||null===(a=r.campaign)||void 0===a?void 0:a.currentTurnId)||"")].map(e)}));var t=[{component:Object(N.jsx)(Be,{}),path:"/",basePath:"/",exact:!0,pageTitle:"Turn Order",icon:x.a},{component:Object(N.jsx)(ke,{}),path:"/players",basePath:"/players/:id?",pageTitle:"Players",icon:f.b},{component:Object(N.jsx)(ve,{showHostile:!0}),path:"/enemies",basePath:"/enemies/:id?",pageTitle:"Enemies",icon:v.a},{component:Object(N.jsx)(ve,{showFriendly:!0,showNeutral:!0}),path:"/npcs",basePath:"/npcs/:id?",pageTitle:"Other NPCs",icon:g.b},{component:Object(N.jsx)(Je,{}),path:"/settings",basePath:"/settings",pageTitle:"Settings",icon:x.b}];return Object(N.jsx)("div",{className:"App",children:Object(N.jsxs)(m.a,{children:[Object(N.jsx)($e,{routes:t}),Object(N.jsxs)(b.a,{maxW:"800",minW:"650",children:[Object(N.jsx)(Qe,{}),Object(N.jsx)(p.c,{children:t.map((function(e){var t=e.component,n=e.basePath,i=e.pageTitle,a=e.exact;return Object(N.jsxs)(p.a,{path:n,exact:a,children:[Object(N.jsx)(u.a,{children:Object(N.jsx)(h.a,{size:"md",children:i})}),Object(N.jsx)(O.a,{mt:4,mb:4}),t]},i)}))})]})]})})}var tt=n(347),nt=Object(tt.a)({components:{Drawer:{variants:{alwaysOpen:{dialog:{pointerEvents:"auto"},dialogContainer:{pointerEvents:"none"}}}}}}),it={enemy:"#AA0000",friendly:"#AAAA00",neutral:"#AAAAAA"};l.a.render(Object(N.jsx)(d.a,{store:Ve,children:Object(N.jsx)(o.a,{theme:nt,children:Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(et,{})})})}),document.getElementById("root")),j()}},[[311,1,2]]]);
//# sourceMappingURL=main.2190c527.chunk.js.map